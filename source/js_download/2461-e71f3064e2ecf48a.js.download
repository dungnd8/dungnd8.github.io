(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2461],{77839:function(e,l,t){"use strict";var n=t(57437),i=t(54854),r=t(65656),s=t(65915),a=t(99911),o=t(816);let defaultHandle=()=>{};l.Z=({title:e,items:l=[],onSelect:t,disabled:c,editable:d=!0,openLockPopup:u})=>{let handleClick=e=>{d&&e.isPremium&&(null==u||u()),!d||e.disabled||e.softDisabled||null==t||t(e.id,!e.value)};return(0,n.jsxs)(i.x,{children:[e,(0,n.jsx)(r.Z,{p:0,children:l.map((e,l)=>{let t=e.disabled||e.softDisabled?null:(0,n.jsx)(s.X,{checked:e.value,radius:"lg",size:"sm",onChange:defaultHandle,disabled:!d});return(0,n.jsxs)("div",{children:[l>0&&(0,n.jsx)(a.i,{ml:"md"}),(0,n.jsx)(o.O,{component:"div",py:"sm",label:e.label,description:e.description,rightSection:t,onClick:()=>handleClick(e),disabled:e.disabled})]},e.id)})})]})}},63527:function(e,l,t){"use strict";var n=t(57437),i=t(17328),r=t(84395),s=t.n(r),a=t(76351),o=t(2265);function Input({defaultValue:e,onChange:l,onChangeImmediate:t,inputStyle:r,...c}){let[d,u]=(0,a.G)(e,200);return(0,o.useEffect)(()=>{t||null==l||l(d)},[d]),(0,o.useEffect)(()=>{t&&e!==d&&u(e)},[e]),(0,n.jsx)(i.o,{autoComplete:"off",autoCorrect:"off",size:"md",styles:{input:{paddingLeft:"0.5rem",fontSize:"14px",fontWeight:400,...r},error:{fontSize:12}},classNames:{wrapper:s().input_root,input:s().input},defaultValue:d,onChange:e=>{u(e.currentTarget.value),t&&(null==l||l(e.currentTarget.value))},...c})}l.Z=Input},32437:function(e,l,t){"use strict";t.d(l,{Z:function(){return components_ListItem}});var n=t(57437),i=t(54593),r=t(26096),s=t.n(r),components_ListItem=({p:e="sm",children:l,...t})=>(0,n.jsx)(i.k,{component:"div",classNames:{root:s().root},p:e,...t,children:l})},86084:function(e,l,t){"use strict";var n=t(57437),i=t(9988),r=t(67108),s=t(57872);l.Z=({className:e,size:l="xs",unlock:t=!1})=>(0,n.jsx)(i.C,{className:`ml-1.5 align-text-bottom ${e}`,leftSection:t?null:(0,n.jsx)(s.Z,{style:{width:(0,r.h)(12),height:(0,r.h)(12)}}),variant:"outline",color:"#efb73e",size:l,radius:"sm",children:"Premium"})},17756:function(e,l,t){"use strict";t.d(l,{Z:function(){return components_ScrollArea}});var n=t(57437),i=t(11193),r=t(63258),s=t.n(r),components_ScrollArea=({classNames:e,...l})=>(0,n.jsx)(i.x,{classNames:{viewport:s().scrollArea_viewport,...e},...l})},40724:function(e,l,t){"use strict";var n,i,r,s;t.d(l,{s:function(){return n},y:function(){return i}}),(r=n||(n={}))[r.ETH=1]="ETH",r[r.BSC=56]="BSC",r[r.ARB=42161]="ARB",(s=i||(i={}))[s.ETH=1]="ETH",s[s.BSC=2]="BSC",s[s.ARB=3]="ARB"},32880:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return AlertContainer}});var n=t(57437),i=t(9433),r=t(2265),s=t(31237),a=t(54854),o=t(31568),c=t(60271),d=t(21146),u=t(84093),h=t(93624),p=t(46838),v=t(92242),m=t(14270),x=t(36599),f=t(69466),g=t(30565),b=t(66607),A=t(74833),j=t(17756),y=t(22461),E=t(26711),C=t(26740),k=t(65656),S=t(99911),T=t(14862),w=t(58746),_=t(92332),L=t(59045),I=t(88248),N=t(26836),R=t(32437),O=t(17740),D=t(78403),Z=t(42509);let AlertSkeleton=()=>(0,n.jsxs)(o.Z,{gap:8,py:"md",children:[(0,n.jsx)(Z.O,{height:26,circle:!0}),(0,n.jsxs)(w.K,{className:"flex-1",gap:12,children:[(0,n.jsx)(Z.O,{height:12,width:68,radius:"md"}),(0,n.jsx)(Z.O,{height:10,width:120,radius:"md"})]}),(0,n.jsx)(w.K,{children:(0,n.jsx)(Z.O,{height:24,width:50,radius:"lg"})})]});var components_AlertListSkeleton=()=>(0,n.jsx)(k.Z,{px:"sm",py:0,children:(0,n.jsxs)(w.K,{gap:"0",children:[(0,n.jsx)(AlertSkeleton,{}),(0,n.jsx)(S.i,{}),(0,n.jsx)(AlertSkeleton,{}),(0,n.jsx)(S.i,{}),(0,n.jsx)(AlertSkeleton,{})]})}),P=t(27468),z=t(63544),B=t(29971);function ListAlertWelcomeMessage({title:e,buttonLabel:l,onCreate:t}){return(0,n.jsx)(P.M,{className:"my-8",h:"40vh",children:(0,n.jsxs)(a.x,{children:[(0,n.jsx)(a.x,{className:"text-center",children:(0,n.jsx)(z.k,{variant:"transparent",radius:"lg",size:"68",children:(0,n.jsx)(B.Z,{size:"68"})})}),(0,n.jsx)(_.x,{className:"text-center my-2",fw:600,size:"lg",children:e||"Create your first Smart Alert"}),(0,n.jsx)(_.x,{className:"text-center",size:"sm",children:"Use Smart Alerts to receive instant notifications about onchain activities involving specific wallets or entities, so you can react promptly to capitalize on opportunities or mitigate risks."}),(0,n.jsx)(a.x,{className:"text-center mt-4",children:(0,n.jsx)(c.z,{variant:"subtle",onClick:t,children:l||"Create Alert"})})]})})}var M=t(28285),F=t(74036);let getAlertList=()=>F.o.get("/api/v1/alert-configs").then(e=>e),useAlertList=e=>(0,M.useQuery)({enabled:e,queryKey:["AlertList"],queryFn:()=>getAlertList()});var V=t(4245),U=t(4691),K=t(20790),$=t(40724),q=t(13485),components_IconChain=({chainId:e,name:l})=>{let t;switch(e){case $.s.ETH:t="/icons/ether_icon.svg";break;case $.s.ARB:t="/icons/arbitrum_icon.svg";break;case $.s.BSC:t="/icons/bsc_icon.svg"}return(0,n.jsx)(q.q,{size:25,radius:"xl",src:t,children:l??(0,n.jsx)(n.Fragment,{children:"\xa0"})})},W=t(41379),Q=t(39686),H=t(86655);function MyAlerts({}){var e;let l=(0,U.N)(),t=(0,p.kD)(),i=null==t?void 0:null===(e=t.components)||void 0===e?void 0:e.popup,{isAuthorized:s}=(0,A.a)(),{data:a}=(0,m.A)(s),[c,d]=(0,O.iR)(e=>[e.setAlertRawConfig,e.setAlertScreen]),{data:v,error:g,isLoading:b,isSuccess:j,isFetched:y}=useAlertList(s),{mutate:E,error:C,isLoading:Z}=(0,V.kw)(O.qs.Toggle),[P,z]=(0,r.useState)(-1),[B,M]=(0,r.useState)(""),handleOpenAlertConfig=(e=!0)=>{if(e&&(null==v?void 0:v.length)>=O.kf){if(i&&!i.isOpened){var t;null==i||null===(t=i.open)||void 0===t||t.call(i,{title:"Quota Exceeded",message:"You exceeded your current quota",buttons:[{id:"alert_config_error",type:"default",text:"OK"}]})}else M("Quota Exceeded"),setTimeout(()=>{M("")},3e3);return}l.push(K.Z.alertConfig)},onAlertClick=(e,l,t=!1)=>{var n,i,r,s;null!=e&&null!==(s=e.target)&&void 0!==s&&null!==(r=s.className)&&void 0!==r&&null!==(i=r.toLowerCase)&&void 0!==i&&null!==(n=i.call(r))&&void 0!==n&&n.includes("switch")||(c(l,t?"create":"update"),handleOpenAlertConfig(t))},onToggleAlert=(e,t,n)=>{if(Z)return;(0,x.B)("click",{category:f.O.ALERT_CREATE_LIST,label:"Click Toggle Alert"});let r=(0,Q.m0)(t,a.eventTypes);if(!r&&(null==e?void 0:e.currentTarget.checked)){if(i&&!i.isOpened){var s;let e=null==i?void 0:null===(s=i.open)||void 0===s?void 0:s.call(i,{title:"Invalid Chain",message:"The selected Event Type is not available on the selected network",buttons:[{id:"ok",type:"default",text:"OK"}]});null==e||e.then(()=>{})}else(0,H.showNotification)({message:"The selected Event Type is not available on the selected network."});return}E({id:t.id,isEnabled:null==e?void 0:e.currentTarget.checked},{onSettled:()=>z(-1),onError:e=>{console.log((0,D.a)(e));let t=(0,D.a)(e);if(t){var n,r;if(null==t?void 0:t.includes("exceeded")){let e=null==i?void 0:null===(n=i.open)||void 0===n?void 0:n.call(i,{title:"Quote exceeded!",message:null==t?void 0:t.replace("Quote exceeded! ",""),buttons:[{id:"confirm_upgrade",type:"default",text:"Upgrade"},{id:"cancel",type:"default",text:"Cancel"}]});null==e||e.then(e=>{"confirm_upgrade"===e&&l.push(K.Z.profile)})}else i&&!i.isOpened?null==i||null===(r=i.open)||void 0===r||r.call(i,{message:`${t}`,buttons:[{type:"ok"}]}):(M(t),setTimeout(()=>{M("")},3e3))}}}),z(n)};return(0,n.jsxs)(n.Fragment,{children:[b&&(0,n.jsx)(components_AlertListSkeleton,{}),y&&!(null==v?void 0:v.length)&&(0,n.jsx)(ListAlertWelcomeMessage,{onCreate:handleOpenAlertConfig}),!!B&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.b,{variant:"light",color:"yellow",title:"Alert limit",icon:(0,n.jsx)(N.Z,{}),children:B}),(0,n.jsx)(u.T,{h:"sm"})]}),(0,n.jsx)(k.Z,{p:0,children:null==v?void 0:v.map((e,l)=>(0,n.jsxs)("div",{children:[l>0&&(0,n.jsx)(S.i,{ml:"md"}),(0,n.jsx)(R.Z,{w:"100%",onClick:l=>{(0,x.B)("click",{category:f.O.ALERT_CREATE_LIST,label:"Click Edit Alert"}),onAlertClick(l,e)},children:(0,n.jsxs)(o.Z,{gap:16,children:[(0,n.jsx)(T.z,{color:"green",inline:!0,withBorder:!0,offset:3,disabled:!e.isPublic,children:(0,n.jsx)(components_IconChain,{chainId:e.chainId,name:(0,W.qz)(e.chainId)})}),(0,n.jsxs)(w.K,{gap:"0",className:"flex-1 min-w-0 text-left",children:[(0,n.jsx)(_.x,{styles:{root:{width:"calc(100% - 50px)"}},fw:500,truncate:"end",children:e.name}),(0,n.jsx)(_.x,{className:"whitespace-normal",size:"xs",c:"dimmed",lineClamp:2,children:e.description}),!!e.numberOfSubscribers&&(0,n.jsxs)(_.x,{size:"xs",c:"dimmed",children:[e.numberOfSubscribers,"\xa0subscribers"]})]}),(0,n.jsxs)(o.Z,{gap:"4",children:[P===l&&(0,n.jsx)(L.a,{size:"sm",color:"blue",type:"dots"}),(0,n.jsx)(I.r,{style:{"--switch-width":"var(--switch-width-md)"},onMouseDown:e=>e.stopPropagation(),onChange:t=>onToggleAlert(t,e,l),size:"lg",checked:e.isEnabled,color:"green",label:""})]})]})})]},`${e.name}_${e.id}`))})]})}var Y=t(14031);function SubscribedAlerts({}){var e;let l=(0,U.N)(),t=(0,p.kD)(),i=null==t?void 0:null===(e=t.components)||void 0===e?void 0:e.popup,{isAuthorized:s}=(0,Y.aC)(),a=(0,C.s)(e=>e.open),{data:c,isLoading:d,isFetched:v}=(0,y.ac)(s),{mutate:m,error:g,isLoading:b}=(0,O.BK)(),[A,j]=(0,r.useState)(-1),[E,T]=(0,r.useState)(""),onAlertClick=(e,l)=>{var t,n,i,r;null!=e&&null!==(r=e.target)&&void 0!==r&&null!==(i=r.className)&&void 0!==i&&null!==(n=i.toLowerCase)&&void 0!==n&&null!==(t=n.call(i))&&void 0!==t&&t.includes("switch")||a(!0,l)},onToggleAlert=(e,t,n)=>{b||((0,x.B)("click",{category:(null==e?void 0:e.currentTarget.checked)?f.O.ALERT_ALLOW_NOTIFICATIONS:f.O.ALERT_MUTE,label:null==t?void 0:t.name}),m({id:t.id,isEnabled:null==e?void 0:e.currentTarget.checked},{onSettled:()=>j(-1),onError:e=>{var n,r;console.log((0,D.a)(e));let s=(0,D.a)(e);if(null==s?void 0:s.includes("exceeded")){let e=null==i?void 0:null===(n=i.open)||void 0===n?void 0:n.call(i,{title:"Quote exceeded!",message:null==s?void 0:s.replace("Quote exceeded! ",""),buttons:[{id:"confirm_upgrade",type:"default",text:"Upgrade"},{id:"cancel",type:"default",text:"Cancel"}]});null==e||e.then(e=>{"confirm_upgrade"===e&&l.push(K.Z.profile)})}else s&&(i&&!i.isOpened?null==i||null===(r=i.open)||void 0===r||r.call(i,{message:`${s}`,buttons:[{type:"ok"}]}):(T(s),setTimeout(()=>{T("")},3e3)));(0,x.B)("click",{category:f.O.ALERT_NOTIFICATIONS_ERROR,label:null==t?void 0:t.name})}}),j(n))};return(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)(components_AlertListSkeleton,{}),v&&!(null==c?void 0:c.length)&&(0,n.jsx)(ListAlertWelcomeMessage,{title:"Explore Smart Alerts",buttonLabel:"Explore Now",onCreate:()=>{l.push(K.Z.explore)}}),!!E&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.b,{variant:"light",color:"yellow",title:"Alert limit",icon:(0,n.jsx)(N.Z,{}),children:E}),(0,n.jsx)(u.T,{h:"sm"})]}),(0,n.jsx)(k.Z,{p:0,children:null==c?void 0:c.map((e,l)=>(0,n.jsxs)("div",{children:[l>0&&(0,n.jsx)(S.i,{ml:"md"}),(0,n.jsx)(R.Z,{w:"100%",onClick:l=>{(0,x.B)("click",{category:f.O.ALERT_CREATE_LIST,label:"Click Edit Alert"}),onAlertClick(l,e)},children:(0,n.jsxs)(o.Z,{gap:16,children:[(0,n.jsx)(components_IconChain,{chainId:e.chainId,name:(0,W.qz)(e.chainId)}),(0,n.jsxs)(w.K,{gap:"0",className:"flex-1 min-w-0 text-left",children:[(0,n.jsx)(_.x,{styles:{root:{width:"calc(100% - 50px)"}},fw:500,truncate:"end",children:e.name}),(0,n.jsx)(_.x,{className:"whitespace-normal",size:"xs",c:"dimmed",lineClamp:2,children:e.description})]}),(0,n.jsxs)(o.Z,{gap:"4",children:[A===l&&(0,n.jsx)(L.a,{size:"sm",color:"blue",type:"dots"}),(0,n.jsx)(I.r,{style:{"--switch-width":"var(--switch-width-md)"},onMouseDown:e=>e.stopPropagation(),onChange:t=>onToggleAlert(t,e,l),size:"lg",checked:e.isEnabled,color:"green",label:""})]})]})})]},`${e.name}_${e.id}`))})]})}var G=t(37873),X=t(20889),J=t(58858);let ee=[{label:"My Alerts",value:X.W.MY_ALERTS},{label:"Subscribed Alerts",value:X.W.SUBSCRIBED}];function ListAlert({}){var e;let l=(0,U.N)(),t=(0,p.kD)(),i=null==t?void 0:null===(e=t.components)||void 0===e?void 0:e.popup,{isAuthorized:s}=(0,A.a)(),{isUsedTelegramStartParams:k,setUsedTelegramStartParams:S}=(0,A.j)(),[T,w]=(0,r.useTransition)(),[_,L]=(0,g.I)({key:"listAlertSegment",defaultValue:X.W.MY_ALERTS}),{params:I,clear:R}=(0,G.W)(),[D,Z]=(0,b.C)(0,{min:0,max:10}),{clearSession:P}=(0,A.a)(e=>({clearSession:e.clearSession})),[z,B]=(0,O.iR)(e=>[e.setAlertConfig,e.setAlertRawConfig]),{data:M,isFetched:F}=useAlertList(s),{data:V}=(0,m.A)(s),{mutateAsync:q}=(0,J.V)(),W=(0,C.s)(e=>e.open),[Q,H]=(0,r.useState)(""),Y=(0,r.useCallback)(async e=>{try{let l=await q(e);l&&(W(!0,l),(0,x.B)("click",{category:f.O.OPEN_SHARED_ALERT,label:l.name}))}catch(e){}},[]);(0,r.useEffect)(()=>{if(!k){if(null==I?void 0:I.ea)S(),R(),Y(I.ea);else if((null==I?void 0:I.ca)||(null==I?void 0:I.cae)||(null==I?void 0:I.caw)){S(),R();let e=!isNaN(Number(null==I?void 0:I.cid))&&parseInt(null==I?void 0:I.cid)||$.s.ETH;z({token:(null==I?void 0:I.ca)&&[null==I?void 0:I.ca]||void 0,chainId:e,accountAddress:(null==I?void 0:I.caw)&&[null==I?void 0:I.caw]||void 0,eventType:null==I?void 0:I.cae}),handleOpenAlertConfig()}else if((null==I?void 0:I.ma)&&(null==M?void 0:M.length)){let e=M.find(e=>e.id==(null==I?void 0:I.ma));e&&(S(),R(),B(e,"update"),handleOpenAlertConfig(!1))}}},[k,I,null==V?void 0:V.featuredAlerts,M]);let handleOpenAlertConfig=(e=!0)=>{if(e&&(null==M?void 0:M.length)>=O.kf){if(i&&!i.isOpened){var t;null==i||null===(t=i.open)||void 0===t||t.call(i,{title:"Quota Exceeded",message:"You exceeded your current quota",buttons:[{id:"alert_config_error",type:"default",text:"OK"}]})}else H("Quota Exceeded"),setTimeout(()=>{H("")},3e3);return}l.push(K.Z.alertConfig)},handleChangeSegmentAlert=e=>{w(()=>{L(e)})};return(0,n.jsxs)(a.x,{className:"flex flex-col",h:"100%",children:[(0,n.jsxs)(o.Z,{justify:"space-between",px:"md",children:[(0,n.jsx)(v.Z,{type:"title",onClick:()=>{Z.increment(),D>=9&&P()},children:"Smart Alerts"}),F&&(null==M?void 0:M.length)?(0,n.jsx)(c.z,{onClick:()=>{(0,x.B)("click",{category:f.O.ALERT_CREATE_LIST,label:"Click Create Alert"}),handleOpenAlertConfig()},px:0,variant:"transparent",children:"Create Alert"}):null]}),(0,n.jsx)(a.x,{px:"md",py:"sm",children:(0,n.jsx)(d.s,{radius:6,fullWidth:!0,value:_,onChange:handleChangeSegmentAlert,data:ee})}),(0,n.jsx)(j.Z,{h:"calc(100vh - 88px)",offsetScrollbars:!0,pl:"md",pr:"10",scrollbarSize:6,children:(0,n.jsxs)(a.x,{w:"100%",className:"pb-3",children:[_===X.W.MY_ALERTS&&(0,n.jsx)(MyAlerts,{}),_===X.W.SUBSCRIBED&&(0,n.jsx)(SubscribedAlerts,{}),!!Q&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.T,{h:"sm"}),(0,n.jsx)(h.b,{variant:"light",color:"yellow",title:"Alert limit",icon:(0,n.jsx)(N.Z,{}),children:Q})]}),(0,n.jsx)(u.T,{h:"lg"}),(0,n.jsx)(E.Z,{viewMode:"alertList",alertType:y.PA.RECOMMENDED,onSubscribed:()=>handleChangeSegmentAlert(X.W.SUBSCRIBED)}),(0,n.jsx)(u.T,{h:"lg"})]})}),(0,n.jsx)(C.Z,{onSubscribed:()=>handleChangeSegmentAlert(X.W.SUBSCRIBED)})]})}function AlertContainer(){let e=(0,s.O)(e=>e.setShow);return(0,r.useEffect)(()=>{e(!0)},[]),(0,n.jsx)(i.W,{className:"overflow-hidden",py:"sm",px:0,h:"calc(100vh - 52px)",children:(0,n.jsx)(ListAlert,{})})}},58858:function(e,l,t){"use strict";t.d(l,{V:function(){return useAlert}});var n=t(55764),i=t(74036);let getAlert=e=>i.o.get(`/api/v1/alert-configs/${e}/public`),useAlert=()=>(0,n.useMutation)({mutationFn:e=>getAlert(e)})},20889:function(e,l,t){"use strict";var n,i;t.d(l,{W:function(){return n}}),(i=n||(n={})).MY_ALERTS="my-alerts",i.SUBSCRIBED="subscribed-alerts"},50523:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return AlertConfigContainer}});var n,i,r=t(57437),s=t(9433),a=t(54854),o=t(64805),c=t(40613),d=t(31568),u=t(18170),h=t(84093),p=t(92332),v=t(60271),m=t(65656),x=t(99911),f=t(41451),g=t(816),b=t(14131),A=t(2265);let j=(0,A.forwardRef)(({label:e,value:l,onClick:t,prefix:n,customIcon:i,error:s},a)=>{let o=i||(0,r.jsx)(b.Z,{color:"grey",size:16});return(0,r.jsx)(f.I.Wrapper,{error:s,styles:{error:{marginInline:12,marginBlock:4}},children:(0,r.jsx)(g.O,{component:"div",py:"sm",label:(0,r.jsx)(p.x,{className:"whitespace-nowrap",fz:"sm",fw:500,children:e}),rightSection:(0,r.jsxs)(d.Z,{children:[(0,r.jsxs)(p.x,{maw:175,truncate:"end",children:[n,l]}),o]}),onClick:t})})});var y=t(63527),E=t(88380),C=t(84395),k=t.n(C);function InputWithLabel({label:e,value:l,onChange:t,...n}){let i=(0,A.useRef)(null);return(0,r.jsx)(E.Y,{type:"tel",size:"md",ref:i,styles:{input:{textAlign:"right",paddingRight:"0.5rem",fontWeight:400},wrapper:{marginBlock:0},section:{width:"min-content"}},classNames:{wrapper:k().input_root,input:k().input},value:l,variant:"unstyled",hideControls:!0,leftSection:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.x,{px:"sm",style:{whiteSpace:"nowrap"},c:"dark.0",size:"sm",lightHidden:!0,children:e}),(0,r.jsx)(p.x,{px:"sm",style:{whiteSpace:"nowrap"},size:"sm",className:"text-black",darkHidden:!0,children:e})]}),prefix:"$",onFocus:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.setSelectionRange(100,100)},onChange:t,...n})}var S=t(39686),T=t(91508),w=t(73617),_=t(21394),L=t(4245),I=t(55764),N=t(74036),R=t(55511);let deleteAlert=({id:e})=>N.o.delete("api/v1/alert-configs",{data:{id:e}}),useDeleteAlert=()=>(0,I.useMutation)({mutationFn:e=>deleteAlert(e),onSuccess:()=>{R.E.invalidateQueries({queryKey:["AlertList"]})}});var O=t(87962),D=t(50994),Z=t(46838),P=t(43042),z=t(3331),B=t(14031),M=t(14270),hooks_useEventTypeDetail=({eventType:e})=>{let{isAuthorized:l}=(0,B.aC)(),{data:t,isLoading:n,isError:i}=(0,M.A)(l);return(0,A.useMemo)(()=>{if(!e)return{eventTypeList:null==t?void 0:t.eventTypes};let l={id:e};if(null==t?void 0:t.eventTypes){let n=t.eventTypes.find(l=>l.id===e)||l;return{eventTypeDetail:n,eventTypeList:t.eventTypes}}return{eventTypeDetail:l,eventTypeList:[]}},[e,t])},F=t(25650),useGetTokenSymbolByAddrs=({address:e=[]})=>{let{data:l,isLoading:t,isError:n}=(0,F.K)(),i=(0,A.useMemo)(()=>{if(null==l?void 0:l.length){let t=e.slice(0,2).map(e=>{var t;let n=l.find(l=>l.address===e);return(null==n?void 0:null===(t=n.symbol)||void 0===t?void 0:t.trim())||""}),n=t.filter(e=>!!e),i=`${n.join(", ")}`;return 0===n.length?`(${e.length})`:e.length>2?`${i}, (+${e.length-n.length})`:i}return`(${e.length})`},[e,l]);return i},V=t(46311),U=t(92242),K=t(36599),$=t(69466),q=t(4617),W=t(57872),Q=t(2759),H=t(66342),Y=t(28606);let G=[{id:Y.a.PRIVATE,name:"Private",description:"Only you can see this alert",icon:(0,r.jsx)(W.Z,{size:18})},{id:Y.a.PUBLIC,name:"Public",description:"Anyone can see & subscribe your alert",icon:(0,r.jsx)(Q.Z,{size:18})}];var AlertConfig_PrivacySelect=({value:e,onSelect:l})=>{var t;let[n,i]=(0,A.useState)(null===(t=G[0])||void 0===t?void 0:t.name);(0,A.useEffect)(()=>{if(e){let l=G.find(l=>l.id===e);i((null==l?void 0:l.name)||e)}},[e]);let handleSelect=e=>{null==l||l(e)};return(0,r.jsxs)(q.v,{shadow:"md",width:240,position:"top-start",offset:4,children:[(0,r.jsx)(q.v.Target,{children:(0,r.jsx)(v.z,{variant:"light",rightSection:(0,r.jsx)(H.Z,{size:16}),px:8,maw:200,h:30,radius:"6",children:n})}),(0,r.jsx)(q.v.Dropdown,{children:null==G?void 0:G.map(e=>(0,r.jsx)(q.v.Item,{styles:{itemLabel:{width:"100%"}},leftSection:e.icon,onClick:()=>handleSelect(e.id),children:(0,r.jsxs)(a.x,{w:"100%",children:[(0,r.jsx)(p.x,{fw:500,className:"flex-1",children:e.name}),(0,r.jsx)(p.x,{className:"flex-1",c:"dimmed",fz:"xs",children:e.description})]})},e.id))})]})},X=t(22461),J=t(2641),ee=t(37352),el=t(30565),et=t(22444),en=t(20712);t(32880);var ei=t(20889),er=t(20790),es=t(4691),ea=t(86655),eo=t(20373),ec=t(76684),ed=t(5363),eu=t(81778),PremiumContent_PopupLock=({show:e,onClose:l})=>{var t;let n=(0,Z.kD)(),i=(0,es.N)(),r=null==n?void 0:null===(t=n.components)||void 0===t?void 0:t.popup,{setForceOpened:s}=(0,eu.Sp)(),a=(0,ed.C)();return(0,A.useEffect)(()=>{if(e){var t;let e=null==r?void 0:null===(t=r.open)||void 0===t?void 0:t.call(r,{title:"Upgrade to unlock",message:"This feature is not available in your current plan",buttons:[{id:"confirm_upgrade",type:"default",text:a?"Free Trial":"Upgrade"},{id:"cancel",type:"default",text:"Cancel"}]});null==e||e.then(e=>{null==l||l(),"confirm_upgrade"===e&&(a&&s(),i.push(er.Z.profile))})}},[e]),null},eh=t(85422),ep=t(86084),ev=t(41379),em=t(40724),components_AlertConfig=function({}){var e,l,t,n,i,s,f,g;let b=(0,es.N)(),E=(0,Z.kD)(),C=null==E?void 0:null===(e=E.components)||void 0===e?void 0:e.popup,k=null==E?void 0:null===(l=E.components)||void 0===l?void 0:l.utils,{isClicked:I,mainButton:N,setStatus:R}=(0,J.Z)({showWhenMount:!1}),{isClicked:F,backButton:q}=(0,ee.Z)(),[W,Q]=(0,el.I)({key:"listAlertSegment"}),[H,G]=(0,et.q)(!1),[ed,eu,ex,ef,eg,eb,eA,ej,ey,eE,eC]=(0,D.i)(e=>[e.config,e.mode,e.setEventType,e.setMinValue,e.setMaxValue,e.setName,e.setDescription,e.clear,e.setAlertScreen,e.setPrivacy,e.setChannelId]),ek="view"===eu,{eventTypeDetail:eS,eventTypeList:eT}=hooks_useEventTypeDetail({eventType:ed.eventType||""}),ew=useGetTokenSymbolByAddrs({address:ed.token||[]}),{isAuthorized:e_}=(0,B.aC)(),{data:eL}=(0,M.A)(e_),{accountLabels:eI}=eL||{},{isAllow:eN}=(0,eh.ZP)(),[eR,eO]=(0,A.useState)(!1);(0,A.useEffect)(()=>{eO(eN({permission:eh.g3.ALERT_CONFIG.TELEGRAM_CHAT_ID}))},[]);let eD=(0,P.c)({initialValues:ed,validate:{alertName:(0,z.U)("Name is required"),eventType:(0,z.U)("Event Type is required"),maxValue:(e,l,t)=>(0,S.F2)(l.minValue)&&(0,S.F2)(e)&&l.minValue>e?"Max must be greater than or equal to Min":null}}),eZ=(0,en.V)({timeout:600}),{mutateAsync:eP,isLoading:ez}=(0,L.kw)("update"===eu?O.qs.Update:O.qs.Create),{mutateAsync:eB,isLoading:eM}=useDeleteAlert(),{mutateAsync:eF,isLoading:eV}=(0,X.zK)();(0,A.useEffect)(()=>{if((null==eT?void 0:eT.length)&&"create"===eu&&!ed.eventType){let l=eT.filter(e=>"token_transfer"===e.id);if(null==l?void 0:l.length)ex("token_transfer");else{var e;ex(null===(e=eT[0])||void 0===e?void 0:e.id)}}},[eT,eu,ed.eventType]),(0,A.useEffect)(()=>{eD.setValues(ed)},[ed]),(0,A.useEffect)(()=>{if(eD.errors&&Object.values(eD.errors)){let l=Object.values(eD.errors);if(l.length){let t=l[0];if(t){if(C&&!C.isOpened){var e;null==C||null===(e=C.open)||void 0===e||e.call(C,{message:t,buttons:[{type:"ok"}]})}else(0,ea.showNotification)({message:t})}}}},[eD.errors]);let eU=(0,A.useCallback)((e=!0)=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Back"}),ej(),e?b.back():b.push(er.Z.alert)},[]),eK=(0,A.useCallback)(async()=>{try{if((0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Save"}),eD.validate(),eD.isValid()){var e,l;let t={account_address:ed.accountAddress,account_label:null==ed?void 0:ed.accountLabel,token_address:ed.token||[]};ed.isPrivateLabel&&(t.account_label=void 0,t.private_label=null==ed?void 0:ed.accountLabel),ed.isExcludeToken&&(t.token_address=[],t.excluded_token_address=ed.token||[]),(0,S.F2)(ed.minValue)&&(t.amount_range={min:ed.minValue}),(0,S.F2)(ed.maxValue)&&(t.amount_range={...t.amount_range,max:ed.maxValue});let n={eventType:ed.eventType,name:ed.alertName,description:ed.alertDescription,formData:t,isPublic:ed.privacy===Y.a.PUBLIC,channelId:ed.channelId||null,chainId:ed.chainId||em.s.ETH};"update"===eu&&(n.id=ed.id);let i=(0,S.ie)(n,eT),r=(0,S.se)(n,eT,eI,eN),s=(0,S.m0)(n,eT);if(!s){if(null==N||N.hideLoader(),null==N||N.enable(),C&&!C.isOpened){let l=null==C?void 0:null===(e=C.open)||void 0===e?void 0:e.call(C,{title:"Invalid Chain",message:"The selected Event Type is not available on the selected network",buttons:[{id:"ok",type:"default",text:"OK"}]});null==l||l.then(()=>{})}else(0,ea.showNotification)({message:"The selected Event Type is not available on the selected network."})}if(r.isValid&&s)await eP(i),null==N||N.hideLoader(),null==N||N.enable(),Q(ei.W.MY_ALERTS),eU(!1);else if(!r.isValid){if(null==N||N.hideLoader(),null==N||N.enable(),C&&!C.isOpened){let e=null==C?void 0:null===(l=C.open)||void 0===l?void 0:l.call(C,{title:"Upgrade to unlock",message:`The config in "${r.notValidField}" is not available in your current plan`,buttons:[{id:"confirm_upgrade",type:"default",text:"Upgrade"},{id:"cancel",type:"default",text:"Cancel"}]});null==e||e.then(e=>{"confirm_upgrade"===e&&b.push(er.Z.profile)})}else(0,ea.showNotification)({message:`The config in "${r.notValidField}" is not available in your current plan`})}}else null==N||N.hideLoader(),null==N||N.enable()}catch(e){null==N||N.hideLoader(),null==N||N.enable(),(0,K.B)("message",{category:$.O.ALERT_CREATE_CREATE,label:`Error: ${(0,S.az)(e)}`,nonInteraction:!0}),handleShowMessage(e)}},[ed,eu,eD.values,eT,eI]),handleShowMessage=e=>{let l=(0,S.az)(e);if(C&&!C.isOpened){var t;null==C||null===(t=C.open)||void 0===t||t.call(C,{message:l,buttons:[{type:"ok"}]})}else(0,ea.showNotification)({message:l})};(0,A.useEffect)(()=>{if(!ek){var e,l,t;null==N||null===(e=N.setText)||void 0===e||e.call(N,"Save"),null==N||null===(t=N.enable)||void 0===t||null===(l=t.call(N))||void 0===l||l.show()}},[ek]),(0,A.useEffect)(()=>{I&&(R("idle"),null==N||N.showLoader(),null==N||N.disable(),eK())},[I,eK]),(0,A.useEffect)(()=>{F&&eU()},[F,eU]);let onAddressClick=()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Select Address"}),ey(O.D3.SelectAddress)},onLabelSelectClick=()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Select Label"}),ey(O.D3.SelectLabel)},handleOpenConfirmDelete=async()=>{if((0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Delete Alert"}),C&&!C.isOpened)try{var e;let l=null==C?void 0:null===(e=C.open)||void 0===e?void 0:e.call(C,{message:"Are you sure you want to delete?",buttons:[{id:"cancel_delete_alert",type:"cancel"},{id:"confirm_delete_alert",type:"ok"}]});null==l||l.then(e=>{"confirm_delete_alert"===e&&((0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Confirm Delete"}),handleDelete())})}catch(e){handleDelete()}else handleDelete()},handleDelete=async()=>{try{ed.parentId?await eF({id:ed.parentId}):ed.id&&await eB({id:ed.id}),eU()}catch(e){(0,K.B)("message",{category:$.O.ALERT_DELETE_UNSUBSCRIBE_ERROR,label:`Error: ${(0,S.az)(e)}`,nonInteraction:!0}),handleShowMessage(e)}},e$=(0,A.useMemo)(()=>{switch(eu){case"view":return"Alert Config (View only)";case"update":return"Edit Alert";default:return"Create New Alert"}},[eu]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(PremiumContent_PopupLock,{show:H,onClose:()=>G.close()}),(0,r.jsxs)(a.x,{pos:"relative",px:"md",h:"100%",children:[(ez||eM||eV)&&(0,r.jsx)(o.D,{position:{top:0,left:0},w:"100vw",h:"100vh",children:(0,r.jsx)(c.f,{visible:!0,zIndex:1e3,overlayProps:{radius:"sm",blur:2},loaderProps:{color:"blue",type:"dots"}})}),(0,r.jsx)(d.Z,{justify:"space-between",children:(0,r.jsxs)(d.Z,{gap:3,children:[q?null:(0,r.jsx)(u.A,{variant:"subtle","aria-label":"Back",onClick:()=>eU(),children:(0,r.jsx)(T.Z,{stroke:1.5})}),(0,r.jsx)(U.Z,{type:"title",children:e$})]})}),(0,r.jsx)(h.T,{h:"xs"}),ek&&(0,r.jsxs)(p.x,{ml:5,mt:-10,mb:10,c:"dimmed",size:"xs",children:["#",ed.parentId||ed.id," by"," ",(0,r.jsx)(p.x,{component:"span",children:null===(t=ed.ownerInfo)||void 0===t?void 0:t.name})]}),!ek&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(d.Z,{justify:"space-between",gap:"xs",children:[(0,r.jsx)(AlertConfig_PrivacySelect,{value:ed.privacy,onSelect:eE}),ed.privacy===Y.a.PUBLIC&&"update"===eu&&(0,r.jsx)(v.z,{variant:"light",h:30,radius:"6",px:"8",onClick:()=>{if(ed.id){(0,K.B)("click",{category:$.O.ALERT_SHARE,label:null==ed?void 0:ed.alertName}),eZ.copy((0,ec.U)(ed.id));let l="Share link copied to clipboard.";if(C&&!C.isOpened){var e;null==C||null===(e=C.open)||void 0===e||e.call(C,{message:l,buttons:[{type:"ok"}]})}else(0,ea.showNotification)({message:l})}},children:(0,r.jsxs)(d.Z,{gap:"4",children:["Share",eZ.copied?(0,r.jsx)(eo.Z,{size:18}):(0,r.jsx)(w.Z,{size:18})]})}),"update"===eu&&(0,r.jsx)(u.A,{variant:"transparent","aria-label":"Delete",ml:"auto",color:"red",onClick:handleOpenConfirmDelete,children:(0,r.jsx)(_.Z,{size:20})})]}),(0,r.jsx)(h.T,{h:"xs"})]}),(0,r.jsx)(y.Z,{disabled:ek,label:(0,r.jsx)(U.Z,{children:"ALERT NAME"}),placeholder:"Name",maxLength:50,defaultValue:ed.alertName,onChange:eb,error:eD.getInputProps("alertName").error}),(0,r.jsx)(h.T,{h:"xs"}),(!ek||ek&&ed.alertDescription)&&(0,r.jsx)(y.Z,{disabled:ek,label:(0,r.jsx)(U.Z,{children:"ALERT DESCRIPTION"}),placeholder:"Description",maxLength:250,defaultValue:ed.alertDescription,onChange:eA,error:eD.getInputProps("alertDescription").error}),(0,r.jsx)(h.T,{h:"md"}),(0,r.jsx)(U.Z,{children:"ALERT CONFIG"}),(0,r.jsxs)(m.Z,{p:0,children:[(0,r.jsx)(j,{onClick:()=>{ek||((0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Select Event Type"}),ey(O.D3.SelectEvenType))},label:"Event Type",value:null==eS?void 0:eS.name}),(0,r.jsx)(x.i,{mx:"sm"}),(0,r.jsx)(j,{onClick:()=>{ek||((0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Select Network"}),ey(O.D3.SelectChain))},label:"Network",value:(0,ev.qz)(ed.chainId)}),(0,r.jsx)(x.i,{mx:"sm"}),(0,r.jsx)(j,{onClick:()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_CREATE,label:"Click Select Token"}),ey(O.D3.SelectToken)},label:`Token${ed.isExcludeToken?" (exclude)":""}`,value:(null===(n=ed.token)||void 0===n?void 0:n.length)?ew:"All",error:eD.getInputProps("token").error}),(null==eS?void 0:eS.group_id)===V.w.TRANSACTION&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.i,{mx:"sm"}),(0,r.jsx)(j,{onClick:()=>onAddressClick(),label:"Wallet Address",value:(null===(i=ed.accountAddress)||void 0===i?void 0:i.length)?`(${null===(s=ed.accountAddress)||void 0===s?void 0:s.length})`:"All"}),(0,r.jsx)(x.i,{mx:"sm"}),(0,r.jsx)(j,{onClick:()=>onLabelSelectClick(),label:(0,r.jsx)("span",{children:"Wallet Label"}),value:(null===(f=ed.accountLabel)||void 0===f?void 0:f.length)?`(${null===(g=ed.accountLabel)||void 0===g?void 0:g.length})`:"None"})]})]}),!!eD.getInputProps("eventType").error&&(0,r.jsx)(p.x,{py:4,c:"red",size:"xs",children:eD.getInputProps("eventType").error}),(0,r.jsx)(h.T,{h:"md"}),(null==eS?void 0:eS.group_id)===V.w.TRANSACTION&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U.Z,{children:"USD VALUE"}),(0,r.jsxs)(m.Z,{p:0,children:[(0,r.jsx)(InputWithLabel,{disabled:ek,error:!!eD.getInputProps("maxValue").error,label:"Min",value:ed.minValue,onChange:ef,thousandSeparator:","}),(0,r.jsx)(x.i,{mx:"sm"}),(0,r.jsx)(InputWithLabel,{disabled:ek,error:!!eD.getInputProps("maxValue").error,label:"Max",value:ed.maxValue,onChange:eg,thousandSeparator:","})]}),!!eD.getInputProps("maxValue").error&&(0,r.jsx)(p.x,{py:4,c:"red",size:"xs",children:eD.getInputProps("maxValue").error}),(0,r.jsx)(h.T,{h:"md"})]}),!ek&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.x,{onClick:()=>{eR||G.open()},children:(0,r.jsx)(y.Z,{label:(0,r.jsxs)(d.Z,{gap:0,children:[(0,r.jsx)(U.Z,{className:"relative",children:"Telegram Chat Id"}),(0,r.jsx)(ep.Z,{unlock:eR})]}),placeholder:"Default: Private Chat",maxLength:50,defaultValue:ed.channelId||void 0,onChange:eC,disabled:!eR,className:`${eR?"":"pointer-events-none"}`,error:eD.getInputProps("channelId").error})}),(0,r.jsx)(p.x,{onClick:()=>{null==k||k.openLink("https://1fox.gitbook.io/icryptoai/faq/add-to-my-telegram-group")},td:"underline",c:"dimmed",className:"mt-2",size:"xs",children:"How to find the Telegram Chat Id?"}),(0,r.jsx)(h.T,{h:"md"})]}),!ek&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.T,{h:"md"}),(0,r.jsx)(U.Z,{type:"note",children:"Note: Alert filters are combined with AND logic. Values within the same filter are combined with OR logic. For example, if you add a min USD value and a wallet address, the alert will fire if the transaction has the minimum value AND either the to/from address has at least one of the labels specified."})]}),(0,r.jsx)(h.T,{h:"md"}),(0,r.jsx)(h.T,{h:"lg"}),N||ek?null:(0,r.jsx)(o.D,{className:"w-full px-4",position:{bottom:15},children:(0,r.jsx)(v.z,{onClick:eK,fullWidth:!0,children:"Save"})})]})]})},ex=t(27468),ef=t(58746),eg=t(34436),eb=t(8821),eA=t(90340);let ej=[{value:"all",label:"All"},{value:"address",label:"Address",description:"Specify the address related to this alert"}];function AddressSelect({show:e}){var l,t,n,i;let s=(0,Z.kD)(),c=null==s?void 0:null===(l=s.components)||void 0===l?void 0:l.backButton,d=null==s?void 0:null===(t=s.components)||void 0===t?void 0:t.mainButton,[u,m,x,f]=(0,D.i)(e=>[e.config,e.mode,e.setAccountAddress,e.setAlertScreen]),g="view"===m,[b,j]=(0,A.useState)(0),[E,C]=(0,eb.n)([""]),[k,S]=(0,A.useState)(""),[T,w]=(0,A.useState)("idle"),_=(0,A.useRef)(""),L=(0,A.useRef)(-1);(0,A.useEffect)(()=>{var e;(null===(e=ej[b])||void 0===e?void 0:e.value)==="all"&&(C.setState([""]),k&&S(""))},[b]),(0,A.useEffect)(()=>{var e;(null===(e=u.accountAddress)||void 0===e?void 0:e.length)&&(j(ej.findIndex(e=>"address"===e.value)),C.setState(u.accountAddress)),u.accountAddress||(j(ej.findIndex(e=>"all"===e.value)),C.setState([""]))},[u.accountAddress]),(0,A.useEffect)(()=>{1===b&&0===E.length&&j(0)},[E]);let getReturnValue=(e,l)=>{let t={addrVal:[],inputErr:""};return"address"===e.value&&(l.every(e=>!e)?t.inputErr="Please input address!":l.filter(e=>e).some(e=>!(0,eA.wY)(e))?t.inputErr="Wrong address format!":t.addrVal=l.filter(e=>e)),t},I=(0,A.useCallback)(()=>{try{let{addrVal:e,inputErr:l}=getReturnValue(ej[b],E);if(l){S(l),(0,K.B)("message",{category:$.O.ALERT_CREATE_ADDRESS_SELECT,label:`Error: ${l}`,nonInteraction:!0});return}x(e),j(ej.findIndex(e=>"all"===e.value)),C.setState([""]),f(O.D3.AlertConfig)}catch(e){}},[b,E]);(0,A.useEffect)(()=>{if("click"===T){if(_.current&&L.current>-1){var e,l;C.setItem(L.current,null===(l=_.current)||void 0===l?void 0:null===(e=l.toLowerCase)||void 0===e?void 0:e.call(l)),_.current="",L.current=-1}w("execute")}"execute"===T&&((0,K.B)("click",{category:$.O.ALERT_CREATE_ADDRESS_SELECT,label:"Click Done"}),I(),w("idle"))},[T,E,b,I]);let N=(0,A.useCallback)(()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_ADDRESS_SELECT,label:"Back"}),f(O.D3.AlertConfig)},[]);return((0,A.useEffect)(()=>{var e,l,t,n,i;null==c||c.on("click",N),null==c||null===(e=c.show)||void 0===e||e.call(c);let mainBtnEvent=()=>w("click");return null==d||null===(l=d.setText)||void 0===l||l.call(d,"Done"),null==d||null===(i=d.enable)||void 0===i||null===(n=i.call(d))||void 0===n||null===(t=n.show)||void 0===t||t.call(n),null==d||d.on("click",mainBtnEvent),()=>{var e,l;null==c||c.off("click",N),null==c||null===(e=c.hide)||void 0===e||e.call(c),null==d||d.off("click",mainBtnEvent),null==d||null===(l=d.hide)||void 0===l||l.call(d)}},[c,d,N]),e)?(0,r.jsxs)(a.x,{px:"md",children:[(0,r.jsx)(U.Z,{children:"Select Address"}),(null===(n=ej[b])||void 0===n?void 0:n.value)==="all"?(0,r.jsx)(ex.M,{h:"27vh",children:(0,r.jsxs)(a.x,{children:[(0,r.jsxs)(U.Z,{className:"text-center",type:"note",children:["Filter for transactions from and to",(0,r.jsx)("br",{}),'those addresses. Default is "All"']}),!g&&(0,r.jsx)(ef.K,{align:"center",mt:12,gap:"sm",children:(0,r.jsx)(v.z,{variant:"light",onClick:()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_ADDRESS_SELECT,label:"Add address"}),j(1)},children:"Add Address"})})]})}):null,k&&(0,r.jsx)(p.x,{c:"red",size:"sm",children:k}),(0,r.jsx)(h.T,{h:"md"}),(null===(i=ej[b])||void 0===i?void 0:i.value)==="address"?(0,r.jsxs)(r.Fragment,{children:[E.map((e,l)=>(0,r.jsx)(y.Z,{maxLength:100,disabled:g,defaultValue:e,rightSection:!g&&(0,r.jsx)(eg.Z,{onClick:()=>{C.remove(l),_.current="",L.current=-1},size:16}),onChange:e=>{_.current=e,L.current=l},onBlur:()=>{if(L.current>-1){var e,l;C.setItem(L.current,null===(l=_.current)||void 0===l?void 0:null===(e=l.toLowerCase)||void 0===e?void 0:e.call(l)),_.current="",L.current=-1}},className:"mb-2"},`${e}_${l}`)),!g&&(0,r.jsx)(ef.K,{align:"center",mt:12,gap:"sm",children:(0,r.jsx)(v.z,{style:{fontWeight:400},variant:"subtle",onClick:()=>C.append(""),children:"Add More"})})]}):null,(0,r.jsx)(h.T,{h:"lg"}),(0,r.jsx)(h.T,{h:"lg"}),d?null:(0,r.jsx)(o.D,{className:"w-full px-4",position:{bottom:15},children:(0,r.jsx)(v.z,{onClick:I,fullWidth:!0,children:"Done"})})]}):null}var ey=t(6799),eE=t(14480),eC=t(30759);let ek=Number.MAX_SAFE_INTEGER;var AlertTokenFilter=({show:e})=>{let{isClicked:l,mainButton:t,setDisabled:n}=(0,J.Z)(),{isClicked:i,backButton:s,setDisabled:c}=(0,ee.Z)(),[f,b,j,y,E]=(0,D.i)(e=>[e.config,e.mode,e.setTokens,e.setAlertScreen,e.setIsExcludeToken]),C="view"===b,{data:k=[]}=(0,F.K)({chain_id:f.chainId},{enabled:!!f.chainId});(0,A.useEffect)(()=>{(l||i)&&y(O.D3.AlertConfig)},[l,i]),(0,A.useEffect)(()=>{if(k.length&&f.token){var e;let l=null===(e=f.token)||void 0===e?void 0:e.map(e=>{var l;let t=null===(l=k.filter(l=>l.address===e))||void 0===l?void 0:l[0];return t||{address:e}});_(l)}},[k]);let S=(0,A.useMemo)(()=>{if(f.token){var e;return null===(e=f.token)||void 0===e?void 0:e.map(e=>({address:e}))}return[]},[f.token]),{tokens:w,setToken:_}=(0,ey.UN)(S),[L,I,N,R,Z]=(0,ey.yH)(e=>[e.initSelectedTokens,e.setChainId,e.setLimit,e.setOpenQuery,e.setSingleSelect]),{opened:P}=(0,eC.QP)(ey.V_);(0,A.useEffect)(()=>{w&&j(w.map(e=>e.address))},[w]);let handleRemoveToken=e=>{let l=[...w],t=l.findIndex(l=>l.address===e.address);l.splice(t,1),_(l)},handleOpenSearchSpotlight=(e,l)=>{var t,n,i;["svg","path"].includes(null===(i=e.target)||void 0===i?void 0:null===(n=i.tagName)||void 0===n?void 0:null===(t=n.toLowerCase)||void 0===t?void 0:t.call(n))||(Z(!0),R(l||""),L(w),I(f.chainId),ey.w3.open())},z=(0,A.useCallback)(()=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_TOKEN_SELECT,label:"Done/Back"}),y(O.D3.AlertConfig)},[]);return((0,A.useEffect)(()=>{if(P)N(ek),c(!0),n(!0);else{var e,l,i,r;null==t||null===(e=t.setText)||void 0===e||e.call(t,"Apply"),null==t||null===(i=t.enable)||void 0===i||null===(l=i.call(t))||void 0===l||l.show(),null==s||null===(r=s.show)||void 0===r||r.call(s),setTimeout(()=>{c(!1),n(!1)},100)}},[s,t,P]),e)?(0,r.jsxs)(a.x,{px:"md",children:[(0,r.jsx)(d.Z,{justify:"space-between",children:(0,r.jsxs)(d.Z,{gap:3,children:[s?null:(0,r.jsx)(u.A,{variant:"subtle","aria-label":"Back",onClick:z,children:(0,r.jsx)(T.Z,{stroke:1.5})}),(0,r.jsx)(U.Z,{children:"SELECT TOKEN"})]})}),(0,r.jsx)(h.T,{h:"sm"}),(null==w?void 0:w.length)&&f.isExcludeToken?(0,r.jsx)(ef.K,{align:"center",my:32,gap:"sm",children:(0,r.jsxs)(U.Z,{className:"text-center",type:"note",children:["Filter for transactions, signals from and to",(0,r.jsx)("br",{}),'those tokens. Default is "All"']})}):null,(null==w?void 0:w.length)?(0,r.jsxs)(r.Fragment,{children:[f.isExcludeToken&&(0,r.jsxs)(d.Z,{justify:"space-between",children:[(0,r.jsx)(U.Z,{children:"And Excluded Tokens"}),w.length>0&&(0,r.jsx)(v.z,{variant:"transparent",pr:0,onClick:()=>{_([]),E(!1)},color:"primary.5",children:"Clear"})]}),(0,r.jsx)(m.Z,{className:"py-0 px-0",children:w.map((e,l)=>(0,r.jsxs)(a.x,{children:[(0,r.jsx)(g.O,{component:"div",py:"sm",label:(0,r.jsxs)(r.Fragment,{children:[!e.name&&(0,r.jsx)("span",{children:e.symbol}),e.name&&(0,r.jsxs)(p.x,{maw:275,truncate:"end",children:[e.symbol," (",e.name,")"]})]}),description:(0,eA.FP)(e.address,{nPrefix:5,nSuffix:5}),rightSection:!C&&(0,r.jsx)(eE.Z,{stroke:2,onClick:()=>handleRemoveToken(e)}),onClick:l=>{C||handleOpenSearchSpotlight(l,e.symbol)}}),l<w.length-1?(0,r.jsx)(x.i,{className:"mx-4",size:"xs"}):null]},e.address))})]}):null,(null==w?void 0:w.length)===0&&(0,r.jsxs)(ef.K,{align:"center",mt:32,gap:"sm",children:[(0,r.jsxs)(U.Z,{className:"text-center",type:"note",children:["Filter for transactions, signals from and to",(0,r.jsx)("br",{}),'those tokens. Default is "All"']}),!C&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.z,{variant:"light",onClick:e=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_TOKEN_SELECT,label:"Click Add Token"}),E(!1),handleOpenSearchSpotlight(e)},children:"Add token"}),(0,r.jsx)(v.z,{style:{fontWeight:400},variant:"subtle",onClick:e=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_TOKEN_SELECT,label:"Click Exclude Token"}),E(!0),handleOpenSearchSpotlight(e)},children:"Exclude Token"})]})]}),!C&&(null==w?void 0:w.length)>0&&(null==w?void 0:w.length)<ek&&(0,r.jsx)(ef.K,{align:"center",mt:20,gap:"sm",children:(0,r.jsx)(v.z,{variant:"subtle",onClick:handleOpenSearchSpotlight,children:"Add More"})}),(0,r.jsx)(h.T,{h:"lg"}),(0,r.jsx)(h.T,{h:"lg"}),!t&&(0,r.jsx)(o.D,{className:"w-full px-4",position:{bottom:15},children:(0,r.jsx)(v.z,{onClick:z,fullWidth:!0,children:"Done"})})]}):null},eS=t(77839),eT=t(59045),ew=t(21146);let e_=[{label:"Signal",value:V.w.SIGNAL},{label:"Transaction",value:V.w.TRANSACTION}];var components_SelectEventType=({})=>{let{isClicked:e,mainButton:l}=(0,J.Z)({showWhenMount:!1}),{isClicked:t}=(0,ee.Z)(),[n,i,s,c]=(0,D.i)(e=>[e.config,e.mode,e.setEventType,e.setAlertScreen]),[u,m]=(0,et.q)(!1),{isAllow:x}=(0,eh.ZP)(),[f,g]=(0,A.useState)(V.w.SIGNAL),{isAuthorized:b}=(0,B.aC)(),{data:j,isLoading:y,isError:E}=(0,M.A)(b),{eventTypes:C}=j||{};(0,A.useEffect)(()=>{(e||t)&&((0,K.B)("click",{category:$.O.ALERT_CREATE_EVENTYPE_SELECT,label:"Confirm/Back"}),c(O.D3.AlertConfig))},[e,t]),(0,A.useEffect)(()=>{if(null==C?void 0:C.length){let e=C.find(e=>e.id===n.eventType);(null==e?void 0:e.group_id)&&g(null==e?void 0:e.group_id)}},[C]);let k=(0,A.useMemo)(()=>{var e;return(null==C?void 0:null===(e=C.filter(e=>e.group_id===f))||void 0===e?void 0:e.map(e=>{var l,t;let i=(null===(l=e.packages)||void 0===l?void 0:l.length)&&!x({permission:e.packages}),s=f===V.w.SIGNAL&&n.chainId!==em.s.ETH;return{id:e.id,label:(0,r.jsxs)(p.x,{fz:"sm",fw:500,children:[e.name,(null===(t=e.packages)||void 0===t?void 0:t.length)?(0,r.jsx)(ep.Z,{unlock:x({permission:e.packages})}):null]}),description:(0,r.jsx)(p.x,{fz:"sm",opacity:.6,children:e.description}),value:n.eventType===e.id,softDisabled:i,disabled:s,isPremium:i}}))||[]},[n.eventType,n.chainId,C,f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(PremiumContent_PopupLock,{show:u,onClose:()=>m.close()}),(0,r.jsxs)(a.x,{px:"md",children:[(0,r.jsxs)(d.Z,{gap:0,children:[(0,r.jsx)(U.Z,{children:"Select Event Type"}),y&&(0,r.jsx)(eT.a,{color:"blue",size:12})]}),(0,r.jsx)(ew.s,{radius:6,fullWidth:!0,value:f,onChange:g,data:e_}),(0,r.jsx)(h.T,{h:"sm"}),(0,r.jsx)(eS.Z,{editable:"view"!==i,items:k,onSelect:e=>{if((0,K.B)("click",{category:$.O.ALERT_CREATE_EVENTYPE_SELECT,label:`Select: ${e}`}),e){var t,n,i;null==l||null===(i=l.enable)||void 0===i||null===(n=i.call(l))||void 0===n||null===(t=n.show)||void 0===t||t.call(n)}s(e,f)},openLockPopup:()=>{m.open()}}),(0,r.jsx)(U.Z,{className:"pt-4 text-center",type:"note",children:"Filter your alerts for certain event types"}),!l&&(0,r.jsx)(o.D,{className:"w-full px-4",position:{bottom:15},children:(0,r.jsx)(v.z,{onClick:()=>c(O.D3.AlertConfig),fullWidth:!0,children:"Done"})})]})]})},eL=t(31237),eI=t(67108),eN=t(11193),eR=t(17740),eO=t(65915),eD=t(41330),eZ=t.n(eD),eP=t(78929),ez=t(77192),eB=t(38909);(n=i||(i={})).ICRYPTO="ICRYPTO",n.PRIVATE="PRIVATE";let eM=[{id:"ICRYPTO",name:"Icrypto",description:"Wallet Labels create by Icrypto Lab",permission:null},{id:"PRIVATE",name:"Private",description:"Personalize your label with custom wallets.",permission:null}];var eF=t(58858),WalletLabel=()=>{var e,l,t,n;let s=(0,es.N)(),{isClicked:c,mainButton:u,setStatus:m}=(0,J.Z)({showWhenMount:!1}),{isClicked:x,setStatus:f}=(0,ee.Z)(),{isAuthorized:g,profile:b}=(0,B.aC)(),{data:j,isLoading:E,isError:C}=(0,M.A)(g),{accountLabels:k}=j,[S,T,w,_,L]=(0,eR.iR)(e=>[e.config,e.mode,e.setAccountLabel,e.setAlertScreen,e.setIsPrivateLabel]),{data:I}=(0,eP.q7)(),{mutateAsync:N}=(0,eF.V)(),R="view"===T,{accountLabel:O,isPrivateLabel:D}=S,[Z,P]=(0,eb.n)([{}]),z=Z.every(e=>e.checked),F=Z.some(e=>e.checked)&&!z,[V,q]=(0,et.q)(!1),{isAllow:W}=(0,eh.ZP)(),[Q,H]=(0,A.useState)(D?i.PRIVATE:i.ICRYPTO),[Y,G]=(0,A.useState)(""),X=(0,A.useRef)(!1);(0,A.useEffect)(()=>{(null==k?void 0:k.length)&&Q===i.ICRYPTO&&P.setState(k.map(e=>({...e,checked:null==O?void 0:O.includes(e.id),type:i.ICRYPTO})))},[O,k,Q]),(0,A.useEffect)(()=>{if(!R&&(null==I?void 0:I.length)&&Q===i.PRIVATE){let e=null==O?void 0:O.map(e=>{var l;return null===(l=e.split("_"))||void 0===l?void 0:l[1]});P.setState(I.map(l=>{let t=eZ()(Z,["id",l.id]);return{...l,checked:(null==t?void 0:t.checked)||(null==e?void 0:e.includes(l.id.toString())),type:i.PRIVATE}}))}},[O,I,Q]),(0,A.useEffect)(()=>{if(R&&S.id){let e=S.parentId;e||(e=S.id),N(e.toString()).then(e=>{var l;(null==e?void 0:null===(l=e.privateLabels)||void 0===l?void 0:l.length)&&P.setState(e.privateLabels.map((e,l)=>({...e,id:l,checked:!0,type:i.PRIVATE})))})}},[R,S]);let el=(0,A.useMemo)(()=>{var e;return(null==Z?void 0:null===(e=Z.filter(e=>{var l,t;return(null==e?void 0:e.type)===Q&&((null==e?void 0:null===(l=e.name)||void 0===l?void 0:l.includes(Y||""))||(null==e?void 0:null===(t=e.description)||void 0===t?void 0:t.includes(Y||"")))}))||void 0===e?void 0:e.map(e=>{var l,t;let n=(null===(l=e.packages)||void 0===l?void 0:l.length)&&!W({permission:e.packages});return{id:e.id,label:(0,r.jsxs)(p.x,{fz:"sm",fw:500,children:[Q!==i.PRIVATE?e.name:(0,r.jsxs)(r.Fragment,{children:[e.name," ",(0,r.jsxs)("span",{className:"ml-0.5 text-gray-400",children:["(",e.numOfWallets||0,")"]})]}),(null===(t=e.packages)||void 0===t?void 0:t.length)?(0,r.jsx)(ep.Z,{unlock:W({permission:e.packages})}):null]}),description:(0,r.jsx)(p.x,{fz:"sm",opacity:.6,children:e.description}),value:e.checked,softDisabled:n,isPremium:n}}))||[]},[Z,Q,Y,R]),en=(0,A.useCallback)(()=>{if((0,K.B)("click",{category:$.O.ALERT_CREATE_LABEL_SELECT,label:"Confirm/Back"}),R&&Q===i.PRIVATE||!X.current){_(eR.D3.AlertConfig);return}Q===i.PRIVATE?(L(!0),w(Z.filter((e,l)=>{var t;return e.checked&&!(null===(t=el[l])||void 0===t?void 0:t.softDisabled)}).map(e=>e.code))):(L(!1),w(Z.filter((e,l)=>{var t;return e.checked&&!(null===(t=el[l])||void 0===t?void 0:t.softDisabled)}).map(e=>e.id))),_(eR.D3.AlertConfig)},[Z,el]);return(0,A.useEffect)(()=>{if(!R){var e,l,t;null==u||null===(t=u.enable)||void 0===t||null===(l=t.call(u))||void 0===l||null===(e=l.show)||void 0===e||e.call(l)}},[R]),c&&(m("idle"),en()),x&&(f("idle"),_(eR.D3.AlertConfig)),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(PremiumContent_PopupLock,{show:V,onClose:()=>q.close()}),(0,r.jsxs)(a.x,{px:"md",children:[(0,r.jsx)(U.Z,{children:"Select Wallet Label"}),(0,r.jsx)(ew.s,{radius:6,fullWidth:!0,value:Q,onChange:H,data:[{value:null===(e=eM[0])||void 0===e?void 0:e.id,label:null===(l=eM[0])||void 0===l?void 0:l.name,disabled:R},{value:null===(t=eM[1])||void 0===t?void 0:t.id,label:null===(n=eM[1])||void 0===n?void 0:n.name,disabled:R}]}),!R&&Q===i.PRIVATE&&(0,r.jsx)(y.Z,{inputStyle:{paddingLeft:"revert-layer"},className:"pt-4",leftSectionPointerEvents:"none",leftSection:(0,r.jsx)(ez.Z,{width:16}),placeholder:"Search private labels",onChange:G}),(0,r.jsx)(a.x,{className:"pt-4 pb-3 pr-3 flex justify-between items-center",children:R?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.x,{miw:60,children:Q===i.PRIVATE&&(0,r.jsx)(v.z,{variant:"transparent",px:12,h:28,onClick:()=>{s.setPrevPathname(),s.push(er.Z.bundles)},children:(0,r.jsxs)(d.Z,{gap:4,children:["Manage Labels",(0,r.jsx)(eB.Z,{size:15})]})})}),(null==el?void 0:el.length)?(0,r.jsx)(eO.X,{className:"",checked:z,indeterminate:F,radius:"lg",size:"sm",labelPosition:"left",label:"Select all",styles:{label:{paddingInline:(0,eI.h)(6)}},onChange:()=>{X.current=!0,P.setState(e=>e.map(e=>({...e,checked:!z})))}}):null]})}),(0,r.jsx)(eN.x,{h:Q===i.PRIVATE?"calc(100vh - 240px)":"calc(100vh - 180px)",scrollbarSize:5,children:(0,r.jsx)(eS.Z,{editable:!R,items:el,onSelect:e=>{var l;X.current=!0;let t=Z.findIndex(l=>l.id===e);P.setItemProp(t,"checked",!(null==Z?void 0:null===(l=Z[t])||void 0===l?void 0:l.checked))},openLockPopup:()=>q.open()})}),(0,r.jsx)(h.T,{h:"md"}),(0,r.jsx)(h.T,{h:"lg"}),u?null:(0,r.jsx)(o.D,{className:"w-full px-4",position:{bottom:15},children:(0,r.jsx)(v.z,{onClick:en,fullWidth:!0,children:"Done"})})]})]})};let eV=[{label:(0,ev.qz)(em.s.ETH),id:em.s.ETH},{label:(0,ev.qz)(em.s.ARB),id:em.s.ARB},{label:(0,ev.qz)(em.s.BSC),id:em.s.BSC}];var components_SelectChain=({})=>{var e;let l=(0,Z.kD)(),t=null==l?void 0:null===(e=l.components)||void 0===e?void 0:e.popup,{isClicked:n,backButton:i}=(0,ee.Z)(),[s,o,c,h,v,m]=(0,D.i)(e=>[e.config,e.mode,e.setChainId,e.setTokens,e.setIsExcludeToken,e.setAlertScreen]),{eventTypeDetail:x}=hooks_useEventTypeDetail({eventType:s.eventType||""});(0,A.useEffect)(()=>{n&&m(O.D3.AlertConfig)},[n]);let f=(0,A.useMemo)(()=>eV.map(e=>({id:e.id,label:(0,r.jsx)(p.x,{fz:"sm",fw:500,children:e.label}),value:e.id===s.chainId,disabled:e.id!==em.s.ETH&&(null==x?void 0:x.group_id)===V.w.SIGNAL})),[s.chainId]),switchNetwork=e=>{(0,K.B)("click",{category:$.O.ALERT_CREATE_NETWORK_SELECT,label:`Select: ${e}`}),c(e),h([]),v(!1),g()},g=(0,A.useCallback)(()=>{m(O.D3.AlertConfig)},[]);return(0,r.jsxs)(a.x,{px:"md",children:[(0,r.jsxs)(d.Z,{gap:0,children:[!i&&(0,r.jsx)(u.A,{variant:"subtle","aria-label":"Back",onClick:g,children:(0,r.jsx)(T.Z,{stroke:1.5})}),(0,r.jsx)(U.Z,{children:"Select Network"})]}),(0,r.jsx)(eS.Z,{editable:"view"!==o,items:f,onSelect:e=>{var l,n;if(e!==s.chainId){if((null===(l=s.token)||void 0===l?void 0:l.length)&&t)try{let l=null==t?void 0:null===(n=t.open)||void 0===n?void 0:n.call(t,{message:"Selected tokens will be removed if you switch to this network. Are you sure you want to continue?",buttons:[{id:"cancel_select_network",type:"cancel"},{id:"confirm_select_network",type:"ok"}]});null==l||l.then(l=>{"confirm_select_network"===l&&switchNetwork(e)})}catch(l){switchNetwork(e)}else switchNetwork(e)}}})]})};function AlertConfigContainer(){let e=(0,eL.O)(e=>e.setShow),[l,t]=(0,D.i)(e=>[e.alertScreen,e.setAlertScreen]);return(0,A.useEffect)(()=>{e(!1),t(O.D3.AlertConfig)},[]),(0,r.jsxs)(s.W,{py:"sm",px:0,h:"calc(100vh - 52px)",children:[l===O.D3.AlertConfig&&(0,r.jsx)(components_AlertConfig,{}),l===O.D3.SelectEvenType&&(0,r.jsx)(components_SelectEventType,{}),l===O.D3.SelectChain&&(0,r.jsx)(components_SelectChain,{}),l===O.D3.SelectAddress&&(0,r.jsx)(AddressSelect,{show:!0}),l===O.D3.SelectToken&&(0,r.jsx)(AlertTokenFilter,{show:!0}),l===O.D3.SelectLabel&&(0,r.jsx)(WalletLabel,{})]})}},4245:function(e,l,t){"use strict";t.d(l,{kw:function(){return useCreateAlert}});var n=t(55764),i=t(74036),r=t(87962),s=t(55511);let createAlert=e=>i.o.post("api/v1/alert-configs",e),updateAlert=e=>i.o.put("api/v1/alert-configs",e),toggleAlert=({id:e,isEnabled:l})=>i.o.patch("api/v1/alert-configs",{id:e,isEnabled:l}),useCreateAlert=e=>{let l;switch(e){case r.qs.Update:l=e=>updateAlert(e);break;case r.qs.Toggle:l=e=>toggleAlert(e);break;default:l=e=>createAlert(e)}return(0,n.useMutation)({mutationFn:l,onSuccess:()=>{s.E.invalidateQueries({queryKey:["AlertList"]})}})}},87962:function(e,l,t){"use strict";var n,i,r,s;t.d(l,{D3:function(){return i},kf:function(){return a},qs:function(){return n}}),(r=n||(n={})).Create="create",r.Update="update",r.Toggle="toggle",(s=i||(i={}))[s.AlertConfig=0]="AlertConfig",s[s.SelectList=1]="SelectList",s[s.SelectAddress=2]="SelectAddress",s[s.SelectToken=3]="SelectToken",s[s.SelectEvenType=4]="SelectEvenType",s[s.SelectLabel=5]="SelectLabel",s[s.SelectChain=6]="SelectChain";let a=50},37873:function(e,l,t){"use strict";t.d(l,{W:function(){return useTelegramStartParams}});var n=t(37429),i=t(24033),r=t(2265);let useTelegramStartParams=()=>{let{hrefWithQuery:e,searchParams:l}=(0,n.o)(),t=(0,i.useRouter)(),[s,a]=(0,r.useState)();return(0,r.useEffect)(()=>{try{let e=l.get("tgWebAppStartParam");if(e){let l=e.split("__");if(null==l?void 0:l.length){let e={};l.forEach(l=>{let t=l.split("_");t.length>=3?e[t[0]]=t.slice(1).join("_"):e[t[0]]=t[1]}),a(e)}}}catch(e){console.log("\uD83D\uDE80 ~ useTelegramStartParams ~ error:",e)}},[]),{params:s,clear:()=>{a(null);let l=e(void 0,{clearQueries:["tgWebAppStartParam"]});t.replace(l,{})}}}},17740:function(e,l,t){"use strict";t.d(l,{kf:function(){return s.kf},qs:function(){return s.qs},D3:function(){return s.D3},iR:function(){return a.i},BK:function(){return useControlSubscribedAlert}}),t(50523);var n=t(55764),i=t(74036),r=t(55511);let controlSubscribedAlert=({id:e,isEnabled:l})=>i.o.patch("api/v1/alert-configs",{id:e,isEnabled:l,isOwned:!1}),useControlSubscribedAlert=()=>(0,n.useMutation)({mutationFn:e=>controlSubscribedAlert(e),onSuccess:()=>{r.E.invalidateQueries({queryKey:["SubscribedAlert"]})}});var s=t(87962),a=t(50994)},50994:function(e,l,t){"use strict";t.d(l,{i:function(){return a}});var n=t(94660),i=t(87962),r=t(28606),s=t(40724);let a=(0,n.Ue)()(e=>({alertScreen:i.D3.AlertConfig,setAlertScreen:l=>{e(()=>({alertScreen:l}))},config:{chainId:s.s.ETH},eventTypeGroup:void 0,mode:"create",setAlertConfig:l=>{e(()=>({config:{chainId:s.s.ETH,...l}}))},setTokens:l=>{e(e=>({config:{...e.config,token:l}}))},setEventType:(l,t)=>{e(e=>{let t={...e.config,eventType:l};return{config:t}})},setChainId:l=>{e(e=>({config:{...e.config,chainId:l}}))},setMinValue:l=>{e(e=>({config:{...e.config,minValue:l&&parseFloat(l)||void 0}}))},setMaxValue:l=>{e(e=>({config:{...e.config,maxValue:l&&parseFloat(l)||void 0}}))},setName:l=>{e(e=>({config:{...e.config,alertName:l}}))},setDescription:l=>{e(e=>({config:{...e.config,alertDescription:l}}))},setAccountAddress:l=>{e(e=>({config:{...e.config,accountAddress:l}}))},setAccountLabel:l=>{e(e=>({config:{...e.config,accountLabel:l}}))},setIsPrivateLabel:l=>{e(e=>({config:{...e.config,isPrivateLabel:l}}))},setIsExcludeToken:l=>{e(e=>({config:{...e.config,isExcludeToken:l}}))},setPrivacy:l=>{e(e=>({config:{...e.config,privacy:l}}))},setChannelId:l=>{e(e=>({config:{...e.config,channelId:l}}))},setAlertRawConfig:(l,t="create")=>{try{var n,i,s,a,o,c,d,u,h,p,v,m;let x=l.formData.all||[],f=null===(n=x.find(e=>"amount"===e.fact&&"greaterThanInclusive"===e.operator))||void 0===n?void 0:n.value,g=null===(i=x.find(e=>"amount"===e.fact&&"lessThanInclusive"===e.operator))||void 0===i?void 0:i.value,b=null===(s=x.filter(e=>"token_address"===e.fact))||void 0===s?void 0:s[0],A=null===(o=x.filter(e=>e.not&&"token_address"===e.not.fact))||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.not,j=null===(c=x.filter(e=>"account_address"===e.fact))||void 0===c?void 0:c[0],y=null===(d=x.filter(e=>"account_label"===e.fact))||void 0===d?void 0:d[0],E=null===(u=x.filter(e=>"private_label"===e.fact))||void 0===u?void 0:u[0],C={id:"update"===t||"view"===t?l.id:void 0,parentId:l.parentAlertId,alertName:l.name,chainId:l.chainId,channelId:l.channelId,alertDescription:l.description,eventType:l.eventType,token:(null==A?void 0:null===(h=A.value)||void 0===h?void 0:h.length)?null==A?void 0:A.value:null==b?void 0:b.value,accountAddress:null==j?void 0:j.value,accountLabel:(null==E?void 0:null===(p=E.value)||void 0===p?void 0:p.length)?null==E?void 0:E.value:null==y?void 0:y.value,isPrivateLabel:!!(null==E?void 0:null===(v=E.value)||void 0===v?void 0:v.length),minValue:f,maxValue:g,isExcludeToken:!!(null==A?void 0:null===(m=A.value)||void 0===m?void 0:m.length),privacy:l.isPublic?r.a.PUBLIC:r.a.PRIVATE,ownerInfo:"view"===t?l.ownerInfo:void 0};e(()=>({config:C,mode:t}))}catch(e){console.log("\uD83D\uDE80 ~ useAlertSetting ~ error:",e)}},clear:()=>{e(()=>({config:{chainId:s.s.ETH},eventTypeGroup:void 0,mode:"create"}))}}))},28606:function(e,l,t){"use strict";var n,i,r,s;t.d(l,{a:function(){return i}}),(r=n||(n={})).TOKEN_TRANSFER="token_transfer",r.EXCHANGE="exchange",r.HOT_SOCIAL="hot_social",r.WALLET_DCA="wallet_dca",r.ACCUMULATED_TOKEN_PRICE="accumulated_token_price",r.POOL_STATS="pool_stats",(s=i||(i={})).PUBLIC="public",s.PRIVATE="private"},39686:function(e,l,t){"use strict";t.d(l,{F2:function(){return isValidNum},MQ:function(){return isAlertContainBundle},az:function(){return getErrorMsg},ie:function(){return validateCUAlertParams},m0:function(){return validateETypeNChain},se:function(){return validatePremiumFeature}}),t(87962),t(28606);var n=t(98614),i=t.n(n);t(82802);var r=t(49027),s=t.n(r),a=t(1181),o=t.n(a),c=t(25727),d=t.n(c),u=t(46311),h=t(40724);let getErrorMsg=e=>{let l;let t=i()(e,"response.data","{}");if(t.validation&&t.statusCode)return i()(t,"validation.body.message","Something when wrong");try{l=JSON.parse(t.message)}catch(e){var n;if((null==t?void 0:t.message)&&(null==t?void 0:null===(n=t.message)||void 0===n?void 0:n.length))return null==t?void 0:t.message}return i()(l,"[0].message","Something when wrong")},isValidNum=e=>{let l=!1;try{let t=parseInt(e);l=!s()(t)}catch(e){}return l},validateCUAlertParams=(e,l)=>{let{eventType:t,formData:n}=e,i=null==l?void 0:l.find(e=>e.id===t),r=(null==i?void 0:i.form_data)||{},s=[];return Object.keys(n).map(e=>{o()(r,e)||s.push(e)}),{...e,formData:d()(n,s)}},validateETypeNChain=(e,l)=>{let{eventType:t,chainId:n}=e,i=null==l?void 0:l.find(e=>e.id===t);return(null==i?void 0:i.group_id)!==u.w.SIGNAL||n===h.s.ETH},isAlertContainBundle=e=>{var l;let{formData:t}=e;return null!=t&&null!==(l=t.all)&&void 0!==l&&!!l.some(e=>"private_label"===e.fact)},validatePremiumFeature=(e,l,t,n)=>{var i;let r=!0,s="",{eventType:a}=e,o=null==l?void 0:l.find(e=>e.id===a);(null==o?void 0:null===(i=o.packages)||void 0===i?void 0:i.length)&&!(r=n({permission:null==o?void 0:o.packages}))&&(s="Event Type");let{formData:c}=e,{account_label:d}=c;return(null==d?void 0:d.length)&&d.forEach(e=>{var l;let i=null==t?void 0:t.find(l=>l.id===e);(null==i?void 0:null===(l=i.packages)||void 0===l?void 0:l.length)&&!(r=n({permission:null==i?void 0:i.packages}))&&(s="Wallet Label")}),{isValid:r,notValidField:s}}},78929:function(e,l,t){"use strict";t.d(l,{C9:function(){return useUpdatePrivateLabel},Ey:function(){return usePrivateLabelDetail},FE:function(){return useCreatePrivateLabel},X9:function(){return useDeletePrivateLabel},q7:function(){return usePrivateLabelList}});var n=t(55764),i=t(74036),r=t(55511),s=t(28285);let getPrivateLabelList=()=>i.o.get("/api/v1/private-labels").then(e=>e),usePrivateLabelList=()=>(0,s.useQuery)({queryKey:["PrivateLabelList"],queryFn:()=>getPrivateLabelList()}),getPrivateLabelDetail=e=>i.o.get(`/api/v1/private-labels/${e}`).then(e=>e),usePrivateLabelDetail=e=>(0,s.useQuery)({enabled:!!e,queryKey:["PrivateLabelDetail",e],queryFn:()=>getPrivateLabelDetail(e)}),createPrivateLabel=e=>i.o.post("api/v1/private-labels",e),updatePrivateLabel=e=>i.o.put("api/v1/private-labels",e),useCreatePrivateLabel=()=>(0,n.useMutation)({mutationFn:e=>createPrivateLabel(e),onSuccess:()=>{r.E.invalidateQueries({queryKey:["PrivateLabelList"]})}}),useUpdatePrivateLabel=()=>(0,n.useMutation)({mutationFn:e=>updatePrivateLabel(e),onSuccess:()=>{r.E.invalidateQueries({queryKey:["PrivateLabelList"]}),r.E.invalidateQueries({queryKey:["PrivateLabelDetail"]})}}),deletePrivateLabel=({id:e})=>i.o.delete("api/v1/private-labels",{data:{id:e}}),useDeletePrivateLabel=()=>(0,n.useMutation)({mutationFn:e=>deletePrivateLabel(e),onSuccess:()=>{r.E.invalidateQueries({queryKey:["PrivateLabelList"]}),r.E.invalidateQueries({queryKey:["AlertList"]})}})},18348:function(e,l,t){"use strict";t.d(l,{_:function(){return useExploreAlert}});var n=t(74036),i=t(28285),r=t(50145);let getExploreAlert=({type:e})=>n.o.get(`/api/v1/alert-configs/${e||r.P.RECOMMENDED}`),useExploreAlert=e=>{let{type:l,enabled:t}=e;return(0,i.useQuery)({enabled:t,queryKey:["ExploreAlert",l],queryFn:()=>getExploreAlert(e)})}},91688:function(e,l,t){"use strict";t.d(l,{X:function(){return useSubscribeAlert}});var n=t(55764),i=t(74036),r=t(55511);let subscribeAlert=({id:e})=>i.o.post("api/v1/alert-configs/subscribe",{id:e}),useSubscribeAlert=()=>(0,n.useMutation)({mutationFn:e=>subscribeAlert(e),onSuccess:()=>{r.E.invalidateQueries({predicate:e=>"SubscribedAlert"===e.queryKey[0]||"ExploreAlert"===e.queryKey[0]})}})},20322:function(e,l,t){"use strict";t.d(l,{a:function(){return useSubscribedAlert}});var n=t(74036),i=t(28285);let getSubscribedAlert=()=>n.o.get("/api/v1/alert-configs/subscribed"),useSubscribedAlert=e=>(0,i.useQuery)({enabled:e,queryKey:["SubscribedAlert"],queryFn:()=>getSubscribedAlert()})},49029:function(e,l,t){"use strict";var n=t(57437),i=t(32437),r=t(69466),s=t(32839),a=t(58746),o=t(31568),c=t(92332),d=t(18170),u=t(54854),h=t(66843),p=t(76843),v=t(84562),m=t(42933),x=t(2265),f=t(26740),g=t(20322),b=t(14031),A=t(32506);l.Z=({data:e,isSubscribing:l,onClick:t,onCopy:j,onSubscribe:y})=>{var E;let{isAuthorized:C}=(0,b.aC)(),{data:k,isLoading:S,isError:T}=(0,g.a)(C),w=(0,x.useMemo)(()=>!!(null==k?void 0:k.find(l=>l.parentAlertId===e.id)),[k,e.id]),_=(0,f.s)(e=>e.open),handleClick=()=>{l||(_(!0,e),null==t||t(e))},L=(0,A.Z)(e.createdAt).fromNow();return(0,n.jsx)(i.Z,{w:"100%",onClick:()=>{(0,r.j)("click",{category:r.O.EXPORE_ALERT,label:`Click Suggested Alert: ${null==e?void 0:e.name}`}),handleClick()},children:(0,n.jsxs)(a.K,{gap:4,w:"100%",children:[(0,n.jsxs)(o.Z,{gap:8,wrap:"nowrap",align:"flex-start",className:"min-w-0",children:[(0,n.jsx)(c.x,{fw:500,truncate:"end",children:e.name}),!T&&(0,n.jsx)(d.A,{variant:"light","aria-label":"Back",radius:"xl",size:"lg",ml:"auto",disabled:S||w||l,children:w?(0,n.jsx)(h.Z,{color:"var(--mantine-color-primary-6)",size:22}):(0,n.jsx)(p.Z,{size:22})})]}),(0,n.jsxs)(u.x,{className:"grid grid-flow-col gap-2 flex-1 min-w-0 text-left",children:[(0,n.jsxs)(a.K,{gap:"0",className:"flex-1 min-w-0 text-left",children:[(0,n.jsx)(c.x,{size:"xs",c:"dimmed",lineClamp:2,children:e.description}),(0,n.jsxs)(o.Z,{mt:"auto",pt:12,gap:10,align:"center",c:"dimmed",children:[(0,n.jsxs)(o.Z,{gap:2,children:[(0,n.jsx)(v.Z,{size:11,className:"mb-[2px]"}),(0,n.jsx)(c.x,{size:"xs",truncate:"end",children:(null===(E=e.ownerInfo)||void 0===E?void 0:E.name)||"anonymous"})]}),!!L&&(0,n.jsxs)(o.Z,{gap:3,children:[(0,n.jsx)(m.Z,{size:11,className:"mb-[2px]"}),(0,n.jsx)(c.x,{component:"span",size:"xs",c:"dimmed",children:L})]})]})]}),!!e.numberOfSubscribers&&(0,n.jsxs)(a.K,{gap:0,className:"text-right",children:[(0,n.jsx)(c.x,{size:"xs",c:"dimmed",children:(0,s.uf)(e.numberOfSubscribers)}),(0,n.jsx)(c.x,{size:"xs",c:"dimmed",children:"subscribers"})]})]})]})})}},71300:function(e,l,t){"use strict";t.d(l,{I:function(){return ExploreAlertCard_ExploreAlertCardSkeleton},Z:function(){return c}});var n=t(49029),i=t(57437),r=t(65656),s=t(31568),a=t(58746),o=t(42509),ExploreAlertCard_ExploreAlertCardSkeleton=()=>(0,i.jsx)(r.Z,{p:"md",w:"100%",children:(0,i.jsxs)(s.Z,{w:"100%",wrap:"nowrap",align:"flex-start",children:[(0,i.jsxs)(a.K,{gap:4,className:"flex-1",children:[(0,i.jsxs)(s.Z,{gap:8,wrap:"nowrap",children:[(0,i.jsx)(o.O,{height:16,circle:!0}),(0,i.jsx)(o.O,{height:12,width:88,radius:"md"})]}),(0,i.jsxs)(a.K,{gap:4,py:"xs",children:[(0,i.jsx)(o.O,{height:10,width:"auto",radius:"md"}),(0,i.jsx)(o.O,{height:10,width:"auto",radius:"md"})]}),(0,i.jsx)(o.O,{height:12,width:80,radius:"md"})]}),(0,i.jsxs)(a.K,{align:"flex-end",gap:12,children:[(0,i.jsx)(o.O,{height:22,circle:!0}),(0,i.jsx)(o.O,{height:10,width:60,radius:"md"})]})]})}),c=n.Z},30602:function(e,l,t){"use strict";var n=t(57437),i=t(58746),r=t(71300);l.Z=()=>(0,n.jsxs)(i.K,{gap:8,children:[(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{}),(0,n.jsx)(r.I,{})]})},26711:function(e,l,t){"use strict";t.d(l,{Z:function(){return components_ExploreAlertList}});var n=t(57437),i=t(92242),r=t(58746),s=t(65656),a=t(54854),o=t(31568),c=t(60271),d=t(2265),u=t(4691),h=t(20790),p=t(18348),v=t(22461),m=t(91688),x=t(46838),f=t(86655),g=t(39686),b=t(50145),A=t(30602),j=t(14031),y=t(27468),E=t(63544),C=t(92332),k=t(29971);function ExploreAlertListEmpty({title:e,buttonLabel:l,onCreate:t}){return(0,n.jsx)(y.M,{className:"my-8",h:"50vh",children:(0,n.jsxs)(a.x,{children:[(0,n.jsx)(a.x,{className:"text-center",children:(0,n.jsx)(E.k,{variant:"transparent",radius:"lg",size:"68",children:(0,n.jsx)(k.Z,{size:"68"})})}),(0,n.jsx)(C.x,{className:"text-center my-2",fw:600,size:"lg",children:e||"You've subscribed to all alerts"}),(0,n.jsx)(C.x,{className:"text-center",size:"sm",children:"Craft your own Smart Alert with a variety of configurations to tailor notifications to your liking."}),(0,n.jsx)(a.x,{className:"text-center mt-4",children:(0,n.jsx)(c.z,{variant:"subtle",onClick:t,children:l||"Create Alert"})})]})})}var S=t(36599),T=t(69466),components_ExploreAlertList=({viewMode:e="explorePage",alertType:l=b.P.RECOMMENDED,onSubscribed:t,defaultAlerts:y})=>{var E;let C=(0,x.kD)(),k=null==C?void 0:null===(E=C.components)||void 0===E?void 0:E.popup,w=(0,u.N)(),{isAuthorized:_}=(0,j.aC)(),{data:L,isLoading:I,isError:N,isSuccess:R,isFetched:O}=(0,p._)({enabled:_,type:l}),{mutateAsync:D,isLoading:Z}=(0,m.X)(),handleNavigate=()=>{w.push(h.Z.explore)},handleNavigateCreateAlert=()=>{w.setPrevPathname(),w.push(h.Z.alertConfig),(0,S.B)("click",{category:T.O.CREATE_ALERT_FROM_EXPLORE})},handleSubscribe=async e=>{var l,n;try{await D({id:e.id}),null==t||t();let n=`Subscribed "${e.name}" alert.`;k&&!k.isOpened?null==k||null===(l=k.open)||void 0===l||l.call(k,{message:n,buttons:[{type:"ok"}]}):(0,f.showNotification)({message:n})}catch(l){let e=(0,g.az)(l);k&&!k.isOpened?null==k||null===(n=k.open)||void 0===n||n.call(k,{message:e,buttons:[{type:"ok"}]}):(0,f.showNotification)({message:e})}},P=(0,d.useMemo)(()=>{if(I&&!y)return(0,n.jsx)(A.Z,{});if(!y&&(N||!(null==L?void 0:L.length)))return(0,n.jsx)(ExploreAlertListEmpty,{onCreate:handleNavigateCreateAlert});let l="alertList"===e?null==L?void 0:L.slice(0,8):L;return y&&(l=y),(0,n.jsx)(r.K,{gap:8,children:null==l?void 0:l.map(e=>(0,n.jsx)(s.Z,{p:0,children:(0,n.jsx)(v.ai,{data:e,isSubscribing:Z,onSubscribe:handleSubscribe})},e.id))})},[L,I,N,Z,e,y]);if("alertList"===e&&(N||O&&!(null==L?void 0:L.length)))return null;let z=l===b.P.RECOMMENDED?"Suggested Alerts":"Trending Alerts";return(0,n.jsxs)(a.x,{children:[(0,n.jsx)(o.Z,{justify:"space-between",pb:"explorePage"===e?"xs":0,children:"alertList"===e&&R&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{type:"alertList"===e?"default":"title",children:z}),(0,n.jsx)(c.z,{variant:"transparent",px:4,onClick:()=>{(0,S.B)("click",{category:T.O.EXPORE_ALERT,label:"Click See More"}),handleNavigate()},children:"See More"})]})}),(0,n.jsx)(a.x,{children:P})]})}},26740:function(e,l,t){"use strict";t.d(l,{Z:function(){return ExploreAlertModal_ExploreAlertModal},s:function(){return $}});var n,i,r=t(57437),s=t(2265),a=t(92242),o=t(17740),c=t(69418),d=t(54854),u=t(60271),h=t(81918),p=t(92332),v=t(28885),m=t(94660),x=t(58746),f=t(65656),g=t(99911),b=t(31568),A=t(18170),j=t(20322),y=t(434),E=t(20373),C=t(50994),k=t(4691),S=t(20790),T=t(46838),w=t(91688),_=t(39686),L=t(86655),I=t(14031),N=t(4617),R=t(29971),O=t(4688),D=t(81945),Z=t(66342),P=t(20625),z=t(22461),B=t(69466);(n=i||(i={}))[n.ALL_NOTIFICATIONS=0]="ALL_NOTIFICATIONS",n[n.NONE_NOTIFICATIONS=1]="NONE_NOTIFICATIONS",n[n.UNSUBSCRIBED=2]="UNSUBSCRIBED";let M=[{id:0,name:"All",icon:R.Z},{id:1,name:"Mute",icon:O.Z},{id:2,name:"Unsubscribe",icon:D.Z}];var ExploreAlertModal_SubscribedButton=({alert:e})=>{var l;let t=(0,T.kD)(),n=null==t?void 0:null===(l=t.components)||void 0===l?void 0:l.popup,[i,a]=(0,s.useState)(),{mutateAsync:c,isLoading:h}=(0,o.BK)(),{mutateAsync:v,isLoading:m}=(0,z.zK)();(0,s.useEffect)(()=>{e&&a(e.isEnabled?0:1)},[e]);let handleSelect=async l=>{var t,r;switch(l){case 0:case 1:try{i!==l&&await c({id:null==e?void 0:e.id,isEnabled:0===l}),(0,B.j)("click",{category:0===l?B.O.ALERT_ALLOW_NOTIFICATIONS:B.O.ALERT_MUTE,label:null==e?void 0:e.name})}catch(i){let l=(0,_.az)(i);n&&!n.isOpened?null==n||null===(t=n.open)||void 0===t||t.call(n,{message:l,buttons:[{type:"ok"}]}):(0,L.showNotification)({message:l}),(0,B.j)("click",{category:B.O.ALERT_NOTIFICATIONS_ERROR,label:null==e?void 0:e.name})}break;case 2:try{await v({id:null==e?void 0:e.parentAlertId}),(0,B.j)("click",{category:B.O.ALERT_UNSUBSCRIBE,label:null==e?void 0:e.name})}catch(t){let l=(0,_.az)(t);n&&!n.isOpened?null==n||null===(r=n.open)||void 0===r||r.call(n,{message:l,buttons:[{type:"ok"}]}):(0,L.showNotification)({message:l}),(0,B.j)("click",{category:B.O.ALERT_DELETE_UNSUBSCRIBE_ERROR,label:null==e?void 0:e.name})}}},x=(0,s.useMemo)(()=>{var e;return null===(e=M.find(e=>e.id===i))||void 0===e?void 0:e.icon},[i]);return(0,r.jsxs)(N.v,{shadow:"md",width:240,position:"top-start",offset:4,children:[(0,r.jsx)(N.v.Target,{children:(0,r.jsx)(u.z,{className:"flex-1",mt:"sm",mb:"xs",px:"sm",variant:"filled",size:"lg",fullWidth:!0,disabled:!(null==e?void 0:e.id),color:"gray",rightSection:(0,r.jsx)(Z.Z,{size:16}),children:(0,r.jsxs)(b.Z,{gap:4,justify:"center",fw:500,children:[x&&(0,r.jsx)(x,{size:22}),(0,r.jsx)(p.x,{size:"md",fw:500,truncate:"end",children:"Subscribed"})]})})}),(0,r.jsx)(N.v.Dropdown,{children:null==M?void 0:M.map(e=>(0,r.jsx)(N.v.Item,{styles:{itemLabel:{width:"100%"}},leftSection:(0,r.jsx)(e.icon,{size:18}),rightSection:i===e.id&&(0,r.jsx)(P.Z,{size:18}),onClick:()=>handleSelect(e.id),children:(0,r.jsx)(d.x,{w:"100%",children:(0,r.jsx)(p.x,{fw:500,className:"flex-1",children:e.name})})},e.id))})]})},F=t(32506),V=t(73617),U=t(20712),K=t(76684),ExploreAlertModal_ExploreAlertDetail=({data:e,onSubscribed:l,onAction:t})=>{var n,i;let a;let o=(0,k.N)(),c=(0,T.kD)(),h=null==c?void 0:null===(n=c.components)||void 0===n?void 0:n.popup,{isAuthorized:v}=(0,I.aC)(),m=(0,U.V)({timeout:600}),N=(null==e?void 0:e.parentAlertId)||(null==e?void 0:e.id),{mutateAsync:R}=(0,w.X)(),{data:O,isLoading:D,isError:Z}=(0,j.a)(v),[P,z]=(0,C.i)(e=>[e.setAlertRawConfig,e.setAlertScreen]),M=(0,s.useMemo)(()=>null==O?void 0:O.find(e=>e.parentAlertId===N),[O,N]),handleSubscribe=async()=>{var t,n;try{let n=await R({id:N});if(null==l||l(),(null==n?void 0:n.message)!=="Success"){let e=null==n?void 0:n.message;e&&(h&&!h.isOpened?null==h||null===(t=h.open)||void 0===t||t.call(h,{message:e,buttons:[{type:"ok"}]}):(0,L.showNotification)({message:e}))}(0,B.j)("click",{category:B.O.ALERT_SUBSCRIBE,label:null==e?void 0:e.name})}catch(t){let l=(0,_.az)(t);h&&!h.isOpened?null==h||null===(n=h.open)||void 0===n||n.call(h,{message:l,buttons:[{type:"ok"}]}):(0,L.showNotification)({message:l}),(0,B.j)("click",{category:B.O.ALERT_SUBSCRIBE_ERROR,label:null==e?void 0:e.name})}},handleCopy=()=>{if(e){if((0,B.j)("click",{category:B.O.ALERT_CLONE,label:null==e?void 0:e.name}),(0,_.MQ)(e)){let e="This alert contains Private Label, you cannot copy. But you can subscribe to receive real-time notifications";if(h&&!h.isOpened){var l;null==h||null===(l=h.open)||void 0===l||l.call(h,{message:e,buttons:[{type:"ok"}]})}else(0,L.showNotification)({message:e});return}P(e),o.push(S.Z.alertConfig),null==t||t()}};return(0,F.Z)(null==e?void 0:e.createdAt).isValid()&&(a=(0,F.Z)().isSame(null==e?void 0:e.createdAt,"day")?(0,F.Z)(null==e?void 0:e.createdAt).fromNow():(0,F.Z)(null==e?void 0:e.createdAt).format("DD/MM HH:mm")),(0,r.jsxs)(x.K,{children:[(0,r.jsxs)(f.Z,{radius:"md",p:"sm",children:[(0,r.jsx)(p.x,{fw:600,size:"sm",c:"dimmed",children:"Name"}),(0,r.jsx)(p.x,{fw:700,children:null==e?void 0:e.name}),!!(null==e?void 0:e.description)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.i,{my:"xs"}),(0,r.jsx)(p.x,{fw:600,size:"sm",c:"dimmed",children:"Description"}),(0,r.jsx)(p.x,{fw:400,children:null==e?void 0:e.description})]}),!!(null==e?void 0:e.numberOfSubscribers)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.i,{my:"xs"}),(0,r.jsx)(p.x,{fw:600,size:"sm",c:"dimmed",children:"Subscribers"}),(0,r.jsx)(p.x,{fw:400,children:null==e?void 0:e.numberOfSubscribers})]}),(0,r.jsx)(g.i,{my:"xs"}),(0,r.jsx)(p.x,{fw:600,size:"sm",c:"dimmed",children:"Author"}),(0,r.jsx)(p.x,{fw:400,children:(null==e?void 0:null===(i=e.ownerInfo)||void 0===i?void 0:i.name)||"anonymous"}),!!a&&!(null==e?void 0:e.parentAlertId)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.i,{my:"xs"}),(0,r.jsx)(p.x,{fw:600,size:"sm",c:"dimmed",children:"Created At"}),(0,r.jsx)(p.x,{fw:400,children:a})]})]}),(0,r.jsxs)(d.x,{children:[(0,r.jsx)(p.x,{size:"xs",c:"dimmed",pb:"sm",children:"*Alert settings are managed by the author."}),(0,r.jsx)(p.x,{size:"xs",c:"dimmed",children:"Subscribe to receive real-time notifications or copy to customize your own settings."})]}),(0,r.jsxs)(b.Z,{gap:"sm",children:[!Z&&(0,r.jsx)(r.Fragment,{children:M?(0,r.jsx)(ExploreAlertModal_SubscribedButton,{alert:M}):(0,r.jsx)(u.z,{className:"flex-1",mt:"sm",mb:"xs",px:"sm",variant:"filled",size:"lg",fullWidth:!0,disabled:D||!e,onClick:()=>{handleSubscribe()},children:"Subscribe"})}),(0,r.jsx)(A.A,{variant:"filled",size:48,"aria-label":"Copy",color:M?"gray":"primary",disabled:!e,onClick:()=>{(0,B.j)("click",{category:B.O.EXPORE_ALERT,label:`Click Copy Alert: ${null==e?void 0:e.name}`}),handleCopy()},children:(0,r.jsx)(y.Z,{size:24})}),(0,r.jsx)(A.A,{variant:"filled",size:48,"aria-label":"Copy",color:M?"gray":"primary",disabled:!e,onClick:()=>{if(N){(0,B.j)("click",{category:B.O.ALERT_SHARE,label:null==e?void 0:e.name}),m.copy((0,K.U)(N));let t="Share link copied to clipboard.";if(h&&!h.isOpened){var l;null==h||null===(l=h.open)||void 0===l||l.call(h,{message:t,buttons:[{type:"ok"}]})}else(0,L.showNotification)({message:t})}},children:m.copied?(0,r.jsx)(E.Z,{size:24}):(0,r.jsx)(V.Z,{size:24})})]})]})};let $=(0,m.Ue)()(e=>({opened:!1,data:void 0,open:(l,t)=>{e(()=>({opened:l,data:t}))}}));var ExploreAlertModal_ExploreAlertModal=({onSubscribed:e})=>{let l=(0,k.N)(),[t,n,i]=$(e=>[e.opened,e.data,e.open]),[s,m]=(0,o.iR)(e=>[e.setAlertRawConfig,e.setAlertScreen]),handleClose=()=>{i(!1)};return(0,r.jsxs)(c.d.Root,{position:"bottom",size:"xs",trapFocus:!1,opened:t,onClose:handleClose,children:[(0,r.jsx)(c.d.Overlay,{backgroundOpacity:.5,blur:4}),(0,r.jsxs)(c.d.Content,{h:"max-content",mih:"var(--drawer-height,100%)",children:[(0,r.jsxs)(c.d.Header,{className:"justify-between",px:"xs",py:"sm",children:[(0,r.jsx)(d.x,{miw:60,children:(0,r.jsx)(u.z,{px:4,variant:"transparent",onClick:handleClose,children:"Cancel"})}),(0,r.jsx)(a.Z,{type:"title",children:"Alert"}),(0,r.jsx)(h.k,{miw:60,children:(0,r.jsxs)(u.z,{variant:"subtle",disabled:!n,onClick:()=>{n&&(s(n,"view"),l.push(S.Z.alertConfig),handleClose())},px:4,children:[(0,r.jsx)(p.x,{fw:500,mr:"4",children:"View Config"}),(0,r.jsx)(v.Z,{size:20})]})})]}),(0,r.jsx)(c.d.Body,{pb:"md",children:(0,r.jsx)(ExploreAlertModal_ExploreAlertDetail,{data:n,onAction:handleClose,onSubscribed:e})})]})]})}},22461:function(e,l,t){"use strict";t.d(l,{ai:function(){return n.Z},PA:function(){return i.P},ac:function(){return r.a},zK:function(){return useUnsubscribeAlert}});var n=t(71300);t(57437),t(92242),t(2265),t(4691),t(20790),t(18348);var i=t(50145);t(49029),t(14031);var r=t(20322),s=t(55764),a=t(74036),o=t(55511);let unsubscribeAlert=({id:e})=>a.o.patch("api/v1/alert-configs/unsubscribe",{id:e}),useUnsubscribeAlert=()=>(0,s.useMutation)({mutationFn:e=>unsubscribeAlert(e),onSuccess:()=>{o.E.invalidateQueries({predicate:e=>"SubscribedAlert"===e.queryKey[0]||"ExploreAlert"===e.queryKey[0]})}})},50145:function(e,l,t){"use strict";var n,i;t.d(l,{P:function(){return n}}),(i=n||(n={})).RECOMMENDED="recommendation",i.TRENDING="trending"},14270:function(e,l,t){"use strict";t.d(l,{A:function(){return useMetadata}});var n=t(74036),i=t(28285);let getMetadata=()=>n.o.get("api/v1/alert-configs/metadata").then(e=>e),useMetadata=(e=!0)=>(0,i.useQuery)({enabled:e,queryKey:["alert_config_metadata"],queryFn:()=>getMetadata()})},46311:function(e,l,t){"use strict";var n,i;t.d(l,{w:function(){return n}}),t(15231),t(470),(0,t(31162).$)("debc1839498b523ffb8cf7790109e1a7fbd97607"),(i=n||(n={})).TRANSACTION="transaction",i.SIGNAL="signal"},25650:function(e,l,t){"use strict";t.d(l,{K:function(){return useTokenList}});var n=t(28285),i=t(74036);let getTokenList=e=>i.o.get("api/v1/assets/all",{params:e}).then(e=>e.data),useTokenList=(e,l)=>(0,n.useQuery)(["token_list",e],()=>getTokenList(e),l)},86432:function(e,l,t){"use strict";t.r(l),t.d(l,{searchTokenSpotlight:function(){return S},searchTokenSpotlightStore:function(){return k}});var n=t(57437),i=t(31568),r=t(27468),s=t(92332),a=t(65915),o=t(17328),c=t(97093),d=t(60271),u=t(93624),h=t(11193),p=t(30759),v=t(72144),m=t(77192),x=t(26836),f=t(2265),g=t(90340),b=t(50806),A=t(59430),j=t.n(A),y=t(46838),E=t(25650),C=t(98590);let[k,S]=(0,p.Gv)();l.default=()=>{var e,l,t;let A=(0,y.kD)(),T=null==A?void 0:null===(e=A.components)||void 0===e?void 0:e.backButton,w=null==A?void 0:null===(l=A.components)||void 0===l?void 0:l.mainButton,_=null==A?void 0:null===(t=A.components)||void 0===t?void 0:t.popup,[L,I]=(0,f.useState)(""),{opened:N}=(0,p.QP)(k),[R,O,D,Z,P,z,B,M,F]=(0,C.y)(e=>[e.chainId,e.selectedTokens,e.setSelectedToken,e.clear,e.limit,e.openQuery,e.setOpenQuery,e.singleSelect,e.setSingleSelect]),[V,U]=(0,f.useState)(!1),K=(0,f.useMemo)(()=>R?{chain_id:R}:{},[R]),{data:$=[],isLoading:q,isError:W}=(0,E.K)(K,{enabled:N});(0,f.useEffect)(()=>{z&&I(z)},[z]);let Q=(0,f.useRef)(null),[H,Y]=(0,f.useState)(1),handleQueryChange=e=>{var l;Y(1),I((null===(l=e.currentTarget)||void 0===l?void 0:l.value)||"")},G=(0,f.useCallback)((e,l)=>{let t=!1;if(l&&P&&O&&O.length>=P){if(t=!0,_&&!_.isOpened){var n;null==_||null===(n=_.open)||void 0===n||n.call(_,{title:"Token limit",message:`Maximum ${P} selected tokens.`,buttons:[{id:"max-token",type:"default",text:"OK"}]})}else U(t)}t||D(e,l)},[P,O,w,M]),handleCloseSpotlight=()=>{S.close(),Z(),B(""),I(""),F(!1)},handleCloseByMiniAppButton=()=>{var e,l;null==w||null===(e=w.hide)||void 0===e||e.call(w),null==w||w.off("click",handleCloseByMiniAppButton),null==T||null===(l=T.hide)||void 0===l||l.call(T),null==T||T.off("click",handleCloseByMiniAppButton),U(!1),handleCloseSpotlight()},X=(0,f.useMemo)(()=>L?(0,b.Lu)($,L,{keys:["name","symbol","address"]}):$,[$,L]),J=(0,f.useMemo)(()=>{let e=X.slice(0,20*H);return e.map(e=>{let l=(0,g.FP)(e.address,{nPrefix:5,nSuffix:5}),t=O&&!!O.find(l=>l.address===e.address)||!1;return(0,n.jsx)(v.$.Action,{onClick:()=>G(e,!t),children:(0,n.jsxs)(i.Z,{wrap:"nowrap",w:"100%",children:[e.image&&(0,n.jsx)(r.M,{children:(0,n.jsx)("img",{src:e.image,alt:e.name||e.symbol,width:50,height:50})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)(i.Z,{gap:"sm",wrap:"nowrap",children:[!!e.symbol&&(0,n.jsx)(s.x,{component:"span",fw:500,children:e.symbol}),(0,n.jsx)(s.x,{component:"span",fw:500,c:"dimmed",truncate:"end",children:e.name||e.address})]}),l&&(0,n.jsx)(s.x,{c:"dimmed",size:"xs",children:l})]}),t&&(0,n.jsx)(a.X,{defaultChecked:!0,radius:"lg",size:"sm"})]})},e.address)})},[X,H,O]),ee=(0,f.useMemo)(()=>q?(0,n.jsx)(v.$.Empty,{children:"Loading..."}):J.length>0?J:(0,n.jsx)(v.$.Empty,{children:"No token found."}),[q,J]);return(0,n.jsxs)(v.$.Root,{store:k,shortcut:null,closeOnActionTrigger:!1,fullScreen:!0,scrollable:!0,trapFocus:!0,radius:0,styles:{content:{height:"100vh",maxHeight:"100%"}},onSpotlightOpen:()=>{var e,l,t,n,i;null==w||null===(e=w.setText)||void 0===e||e.call(w,"Done"),null==w||null===(n=w.enable)||void 0===n||null===(t=n.call(w))||void 0===t||null===(l=t.show)||void 0===l||l.call(t),null==w||w.on("click",handleCloseByMiniAppButton),null==T||null===(i=T.show)||void 0===i||i.call(T),null==T||T.on("click",handleCloseByMiniAppButton)},onSpotlightClose:handleCloseSpotlight,children:[(0,n.jsxs)(i.Z,{gap:4,px:8,children:[(0,n.jsx)(o.o,{"data-autofocus":!0,autoComplete:"off",autoCorrect:"off",className:"flex-1",variant:"unstyled",size:"md",classNames:{wrapper:j().input_root},placeholder:"Search token, contract address",leftSection:(0,n.jsx)(m.Z,{stroke:1.5}),disabled:q,rightSectionPointerEvents:"all",rightSection:""!==L&&(0,n.jsx)(c.P,{size:"md",onMouseDown:e=>e.preventDefault(),onClick:()=>handleQueryChange(""),"aria-label":"Clear search"}),value:L,onChange:handleQueryChange}),!w&&(0,n.jsx)(d.z,{py:4,size:"md",variant:"subtle",onClick:S.close,children:"Done"})]}),V&&!!P&&(0,n.jsx)(u.b,{m:8,h:100,variant:"light",color:"blue",title:`Maximum ${P} selected tokens.`,icon:(0,n.jsx)(x.Z,{})}),(0,n.jsx)(h.x,{viewportRef:Q,onScrollPositionChange:({x:e,y:l})=>{H<$.length/20&&Q.current.scrollHeight-Q.current.clientHeight<l+50&&Y(H+1)},classNames:{root:j().scrollArea_root,viewport:j().scrollArea_viewport},children:ee})]})}},98590:function(e,l,t){"use strict";t.d(l,{y:function(){return i}});var n=t(94660);let i=(0,n.Ue)()(e=>({selectedTokens:null,chainId:void 0,limit:void 0,openQuery:"",singleSelect:!1,setLimit:l=>{e(()=>({limit:l}))},setOpenQuery:l=>{e(()=>({openQuery:l}))},setSingleSelect:l=>{e(()=>({singleSelect:l}))},setChainId:l=>{e(()=>({chainId:l}))},initSelectedTokens:l=>{e(()=>({selectedTokens:l}))},setSelectedToken:(l,t)=>{e(e=>{let n=e.selectedTokens&&[...e.selectedTokens]||[];if(t)n.push(l);else{let e=n.findIndex(e=>e.address===l.address);n.splice(e,1)}return{selectedTokens:n}})},clear:()=>{e(()=>({chainId:void 0,limit:void 0,selectedTokens:null}))}}))},6799:function(e,l,t){"use strict";t.d(l,{w3:function(){return n.searchTokenSpotlight},V_:function(){return n.searchTokenSpotlightStore},yH:function(){return i.y},UN:function(){return useTokenSpotlightValue}});var n=t(86432),i=t(98590),r=t(2265);let useTokenSpotlightValue=(e=[])=>{let[l,t]=(0,r.useState)(e),n=(0,i.y)(e=>e.selectedTokens);return(0,r.useEffect)(()=>{n&&t(n)},[n]),{tokens:l,setToken:t}}},90340:function(e,l,t){"use strict";t.d(l,{FP:function(){return truncateAddress},u5:function(){return truncateAddressMini},wY:function(){return isValidAddresses}});let n={braces:"{",brackets:"[",parenthesis:"("},i={braces:"}",brackets:"]",parenthesis:")"};function truncateAddress(e,{nPrefix:l,nSuffix:t,separator:r}={}){if(!e)return"";let s=e.match(/^(0x[a-zA-Z0-9])[a-zA-Z0-9]+([a-zA-Z0-9])$/),a=(l||0)+(t||0)>e.length;return s&&!a?`0x${e.slice(2,2+(l||4))}${r?n[r]:""}…${r?i[r]:""}${e.slice(e.length-(t||4))}`:e}function truncateAddressMini(e,{nPrefix:l,nSuffix:t,separator:r}={nPrefix:4,nSuffix:0}){if(!e)return"";let s=e.match(/^(0x[a-zA-Z0-9])[a-zA-Z0-9]+([a-zA-Z0-9])$/),a=(l||0)+(t||0)>e.length;return s&&!a?`0x${e.slice(2,2+(l||4))}${r?n[r]:""}.${r?i[r]:""}${e.slice(e.length-(t||0))}`:e}function isValidAddresses(e){return/^(0x){1}[0-9a-fA-F]{40}$/i.test(e)}},76684:function(e,l,t){"use strict";t.d(l,{U:function(){return getTelegramBotAlertLink}});let getTelegramBotAlertLink=e=>`https://t.me/icryptoaibot/alert?startapp=ea_${e}`},41379:function(e,l,t){"use strict";t.d(l,{I4:function(){return getChainIdFromRoute},ld:function(){return getChainOnRouteFromChainId},qz:function(){return getChainName}});var n=t(40724);let getChainName=e=>{switch(e){case n.s.ETH:return"Ethereum";case n.s.BSC:return"BSC";case n.s.ARB:return"Arbitrum";default:return""}},getChainIdFromRoute=e=>{let l=parseInt(e);switch(l){case n.y.ETH:return n.s.ETH;case n.y.BSC:return n.s.BSC;case n.y.ARB:return n.s.ARB;default:return null}},getChainOnRouteFromChainId=e=>e?n.y[n.s[e]]:null},32839:function(e,l,t){"use strict";t.d(l,{T3:function(){return formatPercent},ZO:function(){return formatCryptoCurrency},ub:function(){return formatPercent100},uf:function(){return formatNumber}});let formatCurrrency=(e,l={})=>{let t={};Math.abs(e)>1?(t.notation="compact",t.compactDisplay="short",t.maximumFractionDigits=2):(t.minimumSignificantDigits=1,t.maximumSignificantDigits=4);let n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",...t,...l});return n.format(e||0)};function formatCryptoCurrency(e=0,l=!1,t={}){if(Math.abs(e)>.01)return formatCurrrency(e,t);let n=formatNumber(e),i=n.match(/^0\.0+/);if(!i)return formatCurrrency(e,t);let r=i[0];if(l){let e=n.replace(r,"").substring(0,2);return`$0.~${e}`}let s=r.replace("0.",""),a=convertNumberToSymbol(s.length),o=n.replace(r,"").substring(0,4);return`$0.0${a}${o}`}let formatNumber=(e=0,l=2)=>{let t={};t=Math.abs(e)>1?{notation:"compact",compactDisplay:"short",minimumFractionDigits:0,maximumFractionDigits:l}:{minimumSignificantDigits:1,maximumSignificantDigits:4};let n=new Intl.NumberFormat("en-US",t);return n.format(e)};function formatPercent(e=0,l={}){let t=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,...l});return t.format(e)}function formatPercent100(e=0){return e>0?`+${formatNumber(e)}%`:`${formatNumber(e)}%`}let convertNumberToSymbol=(e=0)=>{let l=e.toString().split("");return l.map(e=>{switch(e){case"0":default:return"₀";case"1":return"₁";case"2":return"₂";case"3":return"₃";case"4":return"₄";case"5":return"₅";case"6":return"₆";case"7":return"₇";case"8":return"₈";case"9":return"₉"}}).join("")}},84395:function(e){e.exports={input:"Input_input__a7PXS"}},26096:function(e){e.exports={root:"ListItem_root__VDdgf"}},63258:function(e){e.exports={scrollArea_viewport:"ScrollArea_scrollArea_viewport__DdXsn"}},59430:function(e){e.exports={scrollArea_root:"SearchTokenSpotlight_scrollArea_root__8k9jx",scrollArea_viewport:"SearchTokenSpotlight_scrollArea_viewport__9Z0ZZ",input_root:"SearchTokenSpotlight_input_root__a5UqK"}}}]);